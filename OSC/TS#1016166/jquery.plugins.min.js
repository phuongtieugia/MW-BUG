window.OneStep.$=jQuery.noConflict();var JSON;if(!JSON){JSON={}}(function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];if(a&&typeof a==="object"&&typeof a.toJSON==="function"){a=a.toJSON(e)}if(typeof rep==="function"){a=rep.call(t,e,a)}switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a){return"null"}gap+=indent;u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1){u[n]=str(n,a)||"null"}i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]";gap=o;return i}if(rep&&typeof rep==="object"){s=rep.length;for(n=0;n<s;n+=1){if(typeof rep[n]==="string"){r=rep[n];i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}else{for(r in a){if(Object.prototype.hasOwnProperty.call(a,r)){i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}";gap=o;return i}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;if(typeof JSON.stringify!=="function"){JSON.stringify=function(e,t,n){var r;gap="";indent="";if(typeof n==="number"){for(r=0;r<n;r+=1){indent+=" "}}else if(typeof n==="string"){indent=n}rep=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":e})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i==="object"){for(n in i){if(Object.prototype.hasOwnProperty.call(i,n)){r=walk(i,n);if(r!==undefined){i[n]=r}else{delete i[n]}}}}return reviver.call(e,t,i)}var j;text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();(function(){var e=this;var t=e._;var n={};var r=Array.prototype,i=Object.prototype,s=Function.prototype;var o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty;var c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind;var x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=x}exports._=x}else{e._=x}x.VERSION="1.5.2";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c){e.forEach(t,r)}else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++){if(t.call(r,e[i],i,e)===n)return}}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++){if(t.call(r,e[o[i]],o[i],e)===n)return}}};x.map=x.collect=function(e,t,n){var r=[];if(e==null)return r;if(h&&e.map===h)return e.map(t,n);T(e,function(e,i,s){r.push(t.call(n,e,i,s))});return r};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(e==null)e=[];if(p&&e.reduce===p){if(r)t=x.bind(t,r);return i?e.reduce(t,n):e.reduce(t)}T(e,function(e,s,o){if(!i){n=e;i=true}else{n=t.call(r,n,e,s,o)}});if(!i)throw new TypeError(N);return n};x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(e==null)e=[];if(d&&e.reduceRight===d){if(r)t=x.bind(t,r);return i?e.reduceRight(t,n):e.reduceRight(t)}var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s;if(!i){n=e[a];i=true}else{n=t.call(r,n,e[a],a,f)}});if(!i)throw new TypeError(N);return n};x.find=x.detect=function(e,t,n){var r;C(e,function(e,i,s){if(t.call(n,e,i,s)){r=e;return true}});return r};x.filter=x.select=function(e,t,n){var r=[];if(e==null)return r;if(v&&e.filter===v)return e.filter(t,n);T(e,function(e,i,s){if(t.call(n,e,i,s))r.push(e)});return r};x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)};x.every=x.all=function(e,t,r){t||(t=x.identity);var i=true;if(e==null)return i;if(m&&e.every===m)return e.every(t,r);T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n});return!!i};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=false;if(e==null)return i;if(g&&e.some===g)return e.some(t,r);T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n});return!!i};x.contains=x.include=function(e,t){if(e==null)return false;if(y&&e.indexOf===y)return e.indexOf(t)!=-1;return C(e,function(e){return e===t})};x.invoke=function(e,t){var n=u.call(arguments,2);var r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})};x.pluck=function(e,t){return x.map(e,function(e){return e[t]})};x.where=function(e,t,n){if(x.isEmpty(t))return n?void 0:[];return x[n?"find":"filter"](e,function(e){for(var n in t){if(t[n]!==e[n])return false}return true})};x.findWhere=function(e,t){return x.where(e,t,true)};x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535){return Math.max.apply(Math,e)}if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>r.computed&&(r={value:e,computed:o})});return r.value};x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535){return Math.min.apply(Math,e)}if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})});return r.value};x.shuffle=function(e){var t;var n=0;var r=[];T(e,function(e){t=x.random(n++);r[n-1]=r[t];r[t]=e});return r};x.sample=function(e,t,n){if(arguments.length<2||n){return e[x.random(e.length-1)]}return x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria;var r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};var s=n==null?x.identity:k(n);T(t,function(n,o){var u=s.call(r,n,o,t);e(i,u,n)});return i}};x.groupBy=L(function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)});x.indexBy=L(function(e,t,n){e[t]=n});x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1});x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t);var s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s};x.toArray=function(e){if(!e)return[];if(x.isArray(e))return u.call(e);if(e.length===+e.length)return x.map(e,x.identity);return x.values(e)};x.size=function(e){if(e==null)return 0;return e.length===+e.length?e.length:x.keys(e).length};x.first=x.head=x.take=function(e,t,n){if(e==null)return void 0;return t==null||n?e[0]:u.call(e,0,t)};x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))};x.last=function(e,t,n){if(e==null)return void 0;if(t==null||n){return e[e.length-1]}else{return u.call(e,Math.max(e.length-t,0))}};x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)};x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){if(t&&x.every(e,x.isArray)){return a.apply(n,e)}T(e,function(e){if(x.isArray(e)||x.isArguments(e)){t?o.apply(n,e):A(e,t,n)}else{n.push(e)}});return n};x.flatten=function(e,t){return A(e,t,[])};x.without=function(e){return x.difference(e,u.call(arguments,1))};x.uniq=x.unique=function(e,t,n,r){if(x.isFunction(t)){r=n;n=t;t=false}var i=n?x.map(e,n,r):e;var s=[];var o=[];T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n)){o.push(n);s.push(e[r])}});return s};x.union=function(){return x.uniq(x.flatten(arguments,true))};x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})};x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})};x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0));var t=new Array(e);for(var n=0;n<e;n++){t[n]=x.pluck(arguments,""+n)}return t};x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++){if(t){n[e[r]]=t[r]}else{n[e[r][0]]=e[r][1]}}return n};x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n=="number"){r=n<0?Math.max(0,i+n):n}else{r=x.sortedIndex(e,t);return e[r]===t?r:-1}}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1};x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b){return r?e.lastIndexOf(t,n):e.lastIndexOf(t)}var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1};x.range=function(e,t,n){if(arguments.length<=1){t=e||0;e=0}n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0);var i=0;var s=new Array(r);while(i<r){s[i++]=e;e+=n}return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;n=u.call(arguments,2);return r=function(){if(!(this instanceof r))return e.apply(t,n.concat(u.call(arguments)));O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));if(Object(s)===s)return s;return i}};x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}};x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");T(t,function(t){e[t]=x.bind(e[t],e)});return e};x.memoize=function(e,t){var n={};t||(t=x.identity);return function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}};x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)};x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))};x.throttle=function(e,t,n){var r,i,s;var o=null;var u=0;n||(n={});var a=function(){u=n.leading===false?0:new Date;o=null;s=e.apply(r,i)};return function(){var f=new Date;if(!u&&n.leading===false)u=f;var l=t-(f-u);r=this;i=arguments;if(l<=0){clearTimeout(o);o=null;u=f;s=e.apply(r,i)}else if(!o&&n.trailing!==false){o=setTimeout(a,l)}return s}};x.debounce=function(e,t,n){var r,i,s,o,u;return function(){s=this;i=arguments;o=new Date;var a=function(){var f=new Date-o;if(f<t){r=setTimeout(a,t-f)}else{r=null;if(!n)u=e.apply(s,i)}};var f=n&&!r;if(!r){r=setTimeout(a,t)}if(f)u=e.apply(s,i);return u}};x.once=function(e){var t=false,n;return function(){if(t)return n;t=true;n=e.apply(this,arguments);e=null;return n}};x.wrap=function(e,t){return function(){var n=[e];o.apply(n,arguments);return t.apply(this,n)}};x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--){t=[e[n].apply(this,t)]}return t[0]}};x.after=function(e,t){return function(){if(--e<1){return t.apply(this,arguments)}}};x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)if(x.has(e,n))t.push(n);return t};x.values=function(e){var t=x.keys(e);var n=t.length;var r=new Array(n);for(var i=0;i<n;i++){r[i]=e[t[i]]}return r};x.pairs=function(e){var t=x.keys(e);var n=t.length;var r=new Array(n);for(var i=0;i<n;i++){r[i]=[t[i],e[t[i]]]}return r};x.invert=function(e){var t={};var n=x.keys(e);for(var r=0,i=n.length;r<i;r++){t[e[n[r]]]=n[r]}return t};x.functions=x.methods=function(e){var t=[];for(var n in e){if(x.isFunction(e[n]))t.push(n)}return t.sort()};x.extend=function(e){T(u.call(arguments,1),function(t){if(t){for(var n in t){e[n]=t[n]}}});return e};x.pick=function(e){var t={};var n=a.apply(r,u.call(arguments,1));T(n,function(n){if(n in e)t[n]=e[n]});return t};x.omit=function(e){var t={};var n=a.apply(r,u.call(arguments,1));for(var i in e){if(!x.contains(n,i))t[i]=e[i]}return t};x.defaults=function(e){T(u.call(arguments,1),function(t){if(t){for(var n in t){if(e[n]===void 0)e[n]=t[n]}}});return e};x.clone=function(e){if(!x.isObject(e))return e;return x.isArray(e)?e.slice():x.extend({},e)};x.tap=function(e,t){t(e);return e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;if(e instanceof x)e=e._wrapped;if(t instanceof x)t=t._wrapped;var i=f.call(e);if(i!=f.call(t))return false;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return false;var s=n.length;while(s--){if(n[s]==e)return r[s]==t}var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)){return false}n.push(e);r.push(t);var a=0,l=true;if(i=="[object Array]"){a=e.length;l=a==t.length;if(l){while(a--){if(!(l=M(e[a],t[a],n,r)))break}}}else{for(var c in e){if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}}if(l){for(c in t){if(x.has(t,c)&&!(a--))break}l=!a}}n.pop();r.pop();return l};x.isEqual=function(e,t){return M(e,t,[],[])};x.isEmpty=function(e){if(e==null)return true;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return false;return true};x.isElement=function(e){return!!(e&&e.nodeType===1)};x.isArray=w||function(e){return f.call(e)=="[object Array]"};x.isObject=function(e){return e===Object(e)};T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}});if(!x.isArguments(arguments)){x.isArguments=function(e){return!!(e&&x.has(e,"callee"))}}if(typeof /./!=="function"){x.isFunction=function(e){return typeof e==="function"}}x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))};x.isNaN=function(e){return x.isNumber(e)&&e!=+e};x.isBoolean=function(e){return e===true||e===false||f.call(e)=="[object Boolean]"};x.isNull=function(e){return e===null};x.isUndefined=function(e){return e===void 0};x.has=function(e,t){return l.call(e,t)};x.noConflict=function(){e._=t;return this};x.identity=function(e){return e};x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r};x.random=function(e,t){if(t==null){t=e;e=0}return e+Math.floor(Math.random()*(t-e+1))};var _={escape:{"&":"&","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){if(t==null)return"";return(""+t).replace(D[e],function(t){return _[e][t]})}});x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n};x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];o.apply(e,arguments);return F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t};x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/;var B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};var j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g");var s=0;var o="__p+='";e.replace(i,function(t,n,r,i,u){o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]});if(n){o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"}if(r){o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"}if(i){o+="';\n"+i+"\n__p+='"}s=u+t.length;return t});o+="';\n";if(!n.variable)o="with(obj||{}){\n"+o+"}\n";o="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){u.source=o;throw u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};a.source="function("+(n.variable||"obj")+"){\n"+o+"}";return a};x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x);T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);if((e=="shift"||e=="splice")&&n.length===0)delete n[0];return F.call(this,n)}});T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}});x.extend(x.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(){var e=this;var t=e.Backbone;var n=[];var r=n.push;var i=n.slice;var s=n.splice;var o;if(typeof exports!=="undefined"){o=exports}else{o=e.Backbone={}}o.VERSION="1.1.0";var u=e._;if(!u&&typeof require!=="undefined")u=require("underscore");o.$=e.jQuery||e.Zepto||e.ender||e.$;o.noConflict=function(){e.Backbone=t;return this};o.emulateHTTP=false;o.emulateJSON=false;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);r.push({callback:t,context:n,ctx:n||this});return this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this;var i=u.once(function(){r.off(e,i);t.apply(this,arguments)});i._callback=t;return this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n){this._events={};return this}o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n){for(c=0,h=s.length;c<h;c++){i=s[c];if(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context){r.push(i)}}}if(!r.length)delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e];var r=this._events.all;if(n)c(n,t);if(r)c(r,arguments);return this},stopListening:function(e,t,n){var r=this._listeningTo;if(!r)return this;var i=!t&&!n;if(!n&&typeof t==="object")n=this;if(e)(r={})[e._listenId]=e;for(var s in r){e=r[s];e.off(t,n,this);if(i||u.isEmpty(e._events))delete this._listeningTo[s]}return this}};var f=/\s+/;var l=function(e,t,n,r){if(!n)return true;if(typeof n==="object"){for(var i in n){e[t].apply(e,[i,n[i]].concat(r))}return false}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++){e[t].apply(e,[s[o]].concat(r))}return false}return true};var c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}};var h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeningTo||(this._listeningTo={});var s=t._listenId||(t._listenId=u.uniqueId("l"));i[s]=t;if(!r&&typeof n==="object")r=this;t[e](n,r,this);return this}});a.bind=a.on;a.unbind=a.off;u.extend(o,a);var p=o.Model=function(e,t){var n=e||{};t||(t={});this.cid=u.uniqueId("c");this.attributes={};if(t.collection)this.collection=t.collection;if(t.parse)n=this.parse(n,t)||{};n=u.defaults({},n,u.result(this,"defaults"));this.set(n,t);this.changed={};this.initialize.apply(this,arguments)};u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;if(typeof e==="object"){i=e;n=t}else{(i={})[e]=t}n||(n={});if(!this._validate(i,n))return false;s=n.unset;a=n.silent;o=[];f=this._changing;this._changing=true;if(!f){this._previousAttributes=u.clone(this.attributes);this.changed={}}c=this.attributes,l=this._previousAttributes;if(this.idAttribute in i)this.id=i[this.idAttribute];for(r in i){t=i[r];if(!u.isEqual(c[r],t))o.push(r);if(!u.isEqual(l[r],t)){this.changed[r]=t}else{delete this.changed[r]}s?delete c[r]:c[r]=t}if(!a){if(o.length)this._pending=true;for(var h=0,p=o.length;h<p;h++){this.trigger("change:"+o[h],this,c[o[h]],n)}}if(f)return this;if(!a){while(this._pending){this._pending=false;this.trigger("change",this,n)}}this._pending=false;this._changing=false;return this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:true}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:true}))},hasChanged:function(e){if(e==null)return!u.isEmpty(this.changed);return u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):false;var t,n=false;var r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){if(e==null||!this._previousAttributes)return null;return this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{};if(e.parse===void 0)e.parse=true;var t=this;var n=e.success;e.success=function(r){if(!t.set(t.parse(r,e),e))return false;if(n)n(t,r,e);t.trigger("sync",t,r,e)};F(this,e);return this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;if(e==null||typeof e==="object"){r=e;n=t}else{(r={})[e]=t}n=u.extend({validate:true},n);if(r&&!n.wait){if(!this.set(r,n))return false}else{if(!this._validate(r,n))return false}if(r&&n.wait){this.attributes=u.extend({},o,r)}if(n.parse===void 0)n.parse=true;var a=this;var f=n.success;n.success=function(e){a.attributes=o;var t=a.parse(e,n);if(n.wait)t=u.extend(r||{},t);if(u.isObject(t)&&!a.set(t,n)){return false}if(f)f(a,e,n);a.trigger("sync",a,e,n)};F(this,n);i=this.isNew()?"create":n.patch?"patch":"update";if(i==="patch")n.attrs=r;s=this.sync(i,this,n);if(r&&n.wait)this.attributes=o;return s},destroy:function(e){e=e?u.clone(e):{};var t=this;var n=e.success;var r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){if(e.wait||t.isNew())r();if(n)n(t,i,e);if(!t.isNew())t.trigger("sync",t,i,e)};if(this.isNew()){e.success();return false}F(this,e);var i=this.sync("delete",this,e);if(!e.wait)r();return i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||j();if(this.isNew())return e;return e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:true}))},_validate:function(e,t){if(!t.validate||!this.validate)return true;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;if(!n)return true;this.trigger("invalid",this,n,u.extend(t,{validationError:n}));return false}});var d=["keys","values","pairs","invert","pick","omit"];u.each(d,function(e){p.prototype[e]=function(){var t=i.call(arguments);t.unshift(this.attributes);return u[e].apply(u,t)}});var v=o.Collection=function(e,t){t||(t={});if(t.model)this.model=t.model;if(t.comparator!==void 0)this.comparator=t.comparator;this._reset();this.initialize.apply(this,arguments);if(e)this.reset(e,u.extend({silent:true},t))};var m={add:true,remove:true,merge:true};var g={add:true,remove:false};u.extend(v.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.extend({merge:false},t,g))},remove:function(e,t){var n=!u.isArray(e);e=n?[e]:u.clone(e);t||(t={});var r,i,s,o;for(r=0,i=e.length;r<i;r++){o=e[r]=this.get(e[r]);if(!o)continue;delete this._byId[o.id];delete this._byId[o.cid];s=this.indexOf(o);this.models.splice(s,1);this.length--;if(!t.silent){t.index=s;o.trigger("remove",o,this,t)}this._removeReference(o)}return n?e[0]:e},set:function(e,t){t=u.defaults({},t,m);if(t.parse)e=this.parse(e,t);var n=!u.isArray(e);e=n?e?[e]:[]:u.clone(e);var r,i,s,o,a,f,l;var c=t.at;var h=this.model;var d=this.comparator&&c==null&&t.sort!==false;var v=u.isString(this.comparator)?this.comparator:null;var g=[],y=[],b={};var w=t.add,E=t.merge,S=t.remove;var x=!d&&w&&S?[]:false;for(r=0,i=e.length;r<i;r++){a=e[r];if(a instanceof p){s=o=a}else{s=a[h.prototype.idAttribute]}if(f=this.get(s)){if(S)b[f.cid]=true;if(E){a=a===o?o.attributes:a;if(t.parse)a=f.parse(a,t);f.set(a,t);if(d&&!l&&f.hasChanged(v))l=true}e[r]=f}else if(w){o=e[r]=this._prepareModel(a,t);if(!o)continue;g.push(o);o.on("all",this._onModelEvent,this);this._byId[o.cid]=o;if(o.id!=null)this._byId[o.id]=o}if(x)x.push(f||o)}if(S){for(r=0,i=this.length;r<i;++r){if(!b[(o=this.models[r]).cid])y.push(o)}if(y.length)this.remove(y,t)}if(g.length||x&&x.length){if(d)l=true;this.length+=g.length;if(c!=null){for(r=0,i=g.length;r<i;r++){this.models.splice(c+r,0,g[r])}}else{if(x)this.models.length=0;var T=x||g;for(r=0,i=T.length;r<i;r++){this.models.push(T[r])}}}if(l)this.sort({silent:true});if(!t.silent){for(r=0,i=g.length;r<i;r++){(o=g[r]).trigger("add",o,this,t)}if(l||x&&x.length)this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++){this._removeReference(this.models[n])}t.previousModels=this.models;this._reset();e=this.add(e,u.extend({silent:true},t));if(!t.silent)this.trigger("reset",this,t);return e},push:function(e,t){return this.add(e,u.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);this.remove(t,e);return t},unshift:function(e,t){return this.add(e,u.extend({at:0},t))},shift:function(e){var t=this.at(0);this.remove(t,e);return t},slice:function(){return i.apply(this.models,arguments)},get:function(e){if(e==null)return void 0;return this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){if(u.isEmpty(e))return t?void 0:[];return this[t?"find":"filter"](function(t){for(var n in e){if(e[n]!==t.get(n))return false}return true})},findWhere:function(e){return this.where(e,true)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");e||(e={});if(u.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(u.bind(this.comparator,this))}if(!e.silent)this.trigger("sort",this,e);return this},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{};if(e.parse===void 0)e.parse=true;var t=e.success;var n=this;e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e);if(t)t(n,r,e);n.trigger("sync",n,r,e)};F(this,e);return this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return false;if(!t.wait)this.add(e,t);var n=this;var r=t.success;t.success=function(e,t,i){if(i.wait)n.add(e,i);if(r)r(e,t,i)};e.save(null,t);return e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(e,t){if(e instanceof p){if(!e.collection)e.collection=this;return e}t=t?u.clone(t):{};t.collection=this;var n=new this.model(e,t);if(!n.validationError)return n;this.trigger("invalid",this,n.validationError,t);return false},_removeReference:function(e){if(this===e.collection)delete e.collection;e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;if(e==="destroy")this.remove(t,r);if(t&&e==="change:"+t.idAttribute){delete this._byId[t.previous(t.idAttribute)];if(t.id!=null)this._byId[t.id]=t}this.trigger.apply(this,arguments)}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(y,function(e){v.prototype[e]=function(){var t=i.call(arguments);t.unshift(this.models);return u[e].apply(u,t)}});var b=["groupBy","countBy","sortBy"];u.each(b,function(e){v.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var w=o.View=function(e){this.cid=u.uniqueId("view");e||(e={});u.extend(this,u.pick(e,S));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var E=/^(\S+)\s*(.*)$/;var S=["model","collection","el","id","attributes","className","tagName","events"];u.extend(w.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(e,t){if(this.$el)this.undelegateEvents();this.$el=e instanceof o.$?e:o.$(e);this.el=this.$el[0];if(t!==false)this.delegateEvents();return this},delegateEvents:function(e){if(!(e||(e=u.result(this,"events"))))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(!u.isFunction(n))n=this[e[t]];if(!n)continue;var r=t.match(E);var i=r[1],s=r[2];n=u.bind(n,this);i+=".delegateEvents"+this.cid;if(s===""){this.$el.on(i,n)}else{this.$el.on(i,s,n)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));if(this.id)e.id=u.result(this,"id");if(this.className)e["class"]=u.result(this,"className");var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,false)}else{this.setElement(u.result(this,"el"),false)}}});o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};if(!n.url){i.url=u.result(t,"url")||j()}if(n.data==null&&t&&(e==="create"||e==="update"||e==="patch")){i.contentType="application/json";i.data=JSON.stringify(n.attrs||t.toJSON(n))}if(n.emulateJSON){i.contentType="application/x-www-form-urlencoded";i.data=i.data?{model:i.data}:{}}if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST";if(n.emulateJSON)i.data._method=r;var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}if(i.type!=="GET"&&!n.emulateJSON){i.processData=false}if(i.type==="PATCH"&&x){i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var a=n.xhr=o.ajax(u.extend(i,n));t.trigger("request",t,a,n);return a};var x=typeof window!=="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={});if(e.routes)this.routes=e.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var C=/\((.*?)\)/g;var k=/(\(\?)?:\w+/g;var L=/\*\w+/g;var A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){if(!u.isRegExp(e))e=this._routeToRegExp(e);if(u.isFunction(t)){n=t;t=""}if(!n)n=this[t];var r=this;o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s);r.trigger.apply(r,["route:"+t].concat(s));r.trigger("route",t,s);o.history.trigger("route",r,t,s)});return this},navigate:function(e,t){o.history.navigate(e,t);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null){this.route(e,this.routes[e])}},_routeToRegExp:function(e){e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)");return new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[];u.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var M=/^[#\/]|\s+$/g;var _=/^\/+|\/+$/g;var D=/msie [\w.]+/;var P=/\/$/;var H=/[?#].*$/;O.started=false;u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null){if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");if(!e.indexOf(n))e=e.slice(n.length)}else{e=this.getHash()}}return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=true;this.options=u.extend({root:"/"},this.options,e);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment();var n=document.documentMode;var r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/");if(r&&this._wantsHashChange){this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(t)}if(this._hasPushState){o.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!r){o.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=t;var i=this.location;var s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!s){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else if(this._hasPushState&&s&&i.hash){this.fragment=this.getHash().replace(M,"");this.history.replaceState({},document.title,this.root+this.fragment+i.search)}}if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);O.started=false},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe){t=this.getFragment(this.getHash(this.iframe))}if(t===this.fragment)return false;if(this.iframe)this.navigate(t);this.loadUrl()},loadUrl:function(e){e=this.fragment=this.getFragment(e);return u.any(this.handlers,function(t){if(t.route.test(e)){t.callback(e);return true}})},navigate:function(e,t){if(!O.started)return false;if(!t||t===true)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(H,"");if(this.fragment===e)return;this.fragment=e;if(e===""&&n!=="/")n=n.slice(0,-1);if(this._hasPushState){this.history[t.replace?"replaceState":"pushState"]({},document.title,n)}else if(this._wantsHashChange){this._updateHash(this.location,e,t.replace);if(this.iframe&&e!==this.getFragment(this.getHash(this.iframe))){if(!t.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,e,t.replace)}}else{return this.location.assign(n)}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else{e.hash="#"+t}}});o.history=new O;var B=function(e,t){var n=this;var r;if(e&&u.has(e,"constructor")){r=e.constructor}else{r=function(){return n.apply(this,arguments)}}u.extend(r,n,t);var i=function(){this.constructor=r};i.prototype=n.prototype;r.prototype=new i;if(e)u.extend(r.prototype,e);r.__super__=n.prototype;return r};p.extend=v.extend=N.extend=w.extend=O.extend=B;var j=function(){throw new Error('A "url" property or function must be specified')};var F=function(e,t){var n=t.error;t.error=function(r){if(n)n(e,r,t);e.trigger("error",e,r,t)}}}).call(this);(function(e){"use strict";var t=function(e,t){if(typeof t=="undefined"){t={}}this.init(e,t)},n=t.prototype,r,i=["canvas","vml"],s=["oval","spiral","square","rect","roundRect"],o=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,u=navigator.appVersion.indexOf("MSIE")!==-1&&parseFloat(navigator.appVersion.split("MSIE")[1])===8?true:false,a=!!document.createElement("canvas").getContext,f=40,l=true,c=function(e,t,n){var r=document.createElement(e),i;for(i in n){r[i]=n[i]}if(typeof t!=="undefined"){t.appendChild(r)}return r},h=function(e,t){for(var n in t){e.style[n]=t[n]}return e},p=function(e,t){for(var n in t){e.setAttribute(n,t[n])}return e},d=function(e,t,n,r){e.save();e.translate(t,n);e.rotate(r);e.translate(-t,-n);e.beginPath()};n.init=function(e,n){if(typeof n.safeVML==="boolean"){l=n.safeVML}try{if(document.getElementById(e)!==undefined){this.mum=document.getElementById(e)}else{this.mum=document.body}}catch(s){this.mum=document.body}n.id=typeof n.id!=="undefined"?n.id:"canvasLoader";this.cont=c("div",this.mum,{id:n.id});if(a){r=i[0];this.can=c("canvas",this.cont);this.con=this.can.getContext("2d");this.cCan=h(c("canvas",this.cont),{display:"none"});this.cCon=this.cCan.getContext("2d")}else{r=i[1];if(typeof t.vmlSheet==="undefined"){document.getElementsByTagName("head")[0].appendChild(c("style"));t.vmlSheet=document.styleSheets[document.styleSheets.length-1];var o=["group","oval","roundrect","fill"],u;for(var u=0;u<o.length;++u){t.vmlSheet.addRule(o[u],"behavior:url(#default#VML); position:absolute;")}}this.vml=c("group",this.cont)}this.setColor(this.color);this.draw();h(this.cont,{display:"none"})};n.cont={};n.can={};n.con={};n.cCan={};n.cCon={};n.timer={};n.activeId=0;n.diameter=40;n.setDiameter=function(e){this.diameter=Math.round(Math.abs(e));this.redraw()};n.getDiameter=function(){return this.diameter};n.cRGB={};n.color="#000000";n.setColor=function(e){this.color=o.test(e)?e:"#000000";this.cRGB=this.getRGB(this.color);this.redraw()};n.getColor=function(){return this.color};n.shape=s[0];n.setShape=function(e){var t;for(t in s){if(e===s[t]){this.shape=e;this.redraw();break}}};n.getShape=function(){return this.shape};n.density=40;n.setDensity=function(e){if(l&&r===i[1]){this.density=Math.round(Math.abs(e))<=f?Math.round(Math.abs(e)):f}else{this.density=Math.round(Math.abs(e))}if(this.density>360){this.density=360}this.activeId=0;this.redraw()};n.getDensity=function(){return this.density};n.range=1.3;n.setRange=function(e){this.range=Math.abs(e);this.redraw()};n.getRange=function(){return this.range};n.speed=2;n.setSpeed=function(e){this.speed=Math.round(Math.abs(e))};n.getSpeed=function(){return this.speed};n.fps=24;n.setFPS=function(e){this.fps=Math.round(Math.abs(e));this.reset()};n.getFPS=function(){return this.fps};n.getRGB=function(e){e=e.charAt(0)==="#"?e.substring(1,7):e;return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}};n.draw=function(){var e=0,t,n,o,a,f,l,v,m,g=this.density,y=Math.round(g*this.range),b,w=0,E,S,x,T,N=1e3,C=0,k=this.cCon,L=this.diameter,A=.47;if(r===i[0]){k.clearRect(0,0,N,N);p(this.can,{width:L,height:L});p(this.cCan,{width:L,height:L});while(e<g){b=e<=y?1-(1-w)/y*e:b=w;l=270-360/g*e;v=l/180*Math.PI;k.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+b.toString()+")";switch(this.shape){case s[0]:case s[1]:t=L*.07;a=L*A+Math.cos(v)*(L*A-t)-L*A;f=L*A+Math.sin(v)*(L*A-t)-L*A;k.beginPath();if(this.shape===s[1]){k.arc(L*.5+a,L*.5+f,t*b,0,Math.PI*2,false)}else{k.arc(L*.5+a,L*.5+f,t,0,Math.PI*2,false)}break;case s[2]:t=L*.12;a=Math.cos(v)*(L*A-t)+L*.5;f=Math.sin(v)*(L*A-t)+L*.5;d(k,a,f,v);k.fillRect(a,f-t*.5,t,t);break;case s[3]:case s[4]:n=L*.3;o=n*.27;a=Math.cos(v)*(o+(L-o)*.13)+L*.5;f=Math.sin(v)*(o+(L-o)*.13)+L*.5;d(k,a,f,v);if(this.shape===s[3]){k.fillRect(a,f-o*.5,n,o)}else{m=o*.55;k.moveTo(a+m,f-o*.5);k.lineTo(a+n-m,f-o*.5);k.quadraticCurveTo(a+n,f-o*.5,a+n,f-o*.5+m);k.lineTo(a+n,f-o*.5+o-m);k.quadraticCurveTo(a+n,f-o*.5+o,a+n-m,f-o*.5+o);k.lineTo(a+m,f-o*.5+o);k.quadraticCurveTo(a,f-o*.5+o,a,f-o*.5+o-m);k.lineTo(a,f-o*.5+m);k.quadraticCurveTo(a,f-o*.5,a+m,f-o*.5)}break}k.closePath();k.fill();k.restore();++e}}else{h(this.cont,{width:L,height:L});h(this.vml,{width:L,height:L});switch(this.shape){case s[0]:case s[1]:x="oval";t=N*.14;break;case s[2]:x="roundrect";t=N*.12;break;case s[3]:case s[4]:x="roundrect";t=N*.3;break}n=o=t;a=N*.5-o;f=-o*.5;while(e<g){b=e<=y?1-(1-w)/y*e:b=w;l=270-360/g*e;switch(this.shape){case s[1]:n=o=t*b;a=N*.5-t*.5-t*b*.5;f=(t-t*b)*.5;break;case s[0]:case s[2]:if(u){f=0;if(this.shape===s[2]){a=N*.5-o*.5}}break;case s[3]:case s[4]:n=t*.95;o=n*.28;if(u){a=0;f=N*.5-o*.5}else{a=N*.5-n;f=-o*.5}C=this.shape===s[4]?.6:0;break}S=p(h(c("group",this.vml),{width:N,height:N,rotation:l}),{coordsize:N+","+N,coordorigin:-N*.5+","+ -N*.5});E=h(c(x,S,{stroked:false,arcSize:C}),{width:n,height:o,top:f,left:a});T=c("fill",E,{color:this.color,opacity:b});++e}}this.tick(true)};n.clean=function(){if(r===i[0]){this.con.clearRect(0,0,1e3,1e3)}else{var e=this.vml;if(e.hasChildNodes()){while(e.childNodes.length>=1){e.removeChild(e.firstChild)}}}};n.redraw=function(){this.clean();this.draw()};n.reset=function(){if(typeof this.timer==="number"){this.hide();this.show()}};n.tick=function(e){var t=this.con,n=this.diameter;if(!e){this.activeId+=360/this.density*this.speed}if(r===i[0]){t.clearRect(0,0,n,n);d(t,n*.5,n*.5,this.activeId/180*Math.PI);t.drawImage(this.cCan,0,0,n,n);t.restore()}else{if(this.activeId>=360){this.activeId-=360}h(this.vml,{rotation:this.activeId})}};n.show=function(){if(typeof this.timer!=="number"){var e=this;this.timer=self.setInterval(function(){e.tick()},Math.round(1e3/this.fps));h(this.cont,{display:"block"})}};n.hide=function(){if(typeof this.timer==="number"){clearInterval(this.timer);delete this.timer;h(this.cont,{display:"none"})}};n.kill=function(){var e=this.cont;if(typeof this.timer==="number"){this.hide()}if(r===i[0]){e.removeChild(this.can);e.removeChild(this.cCan)}else{e.removeChild(this.vml)}var t;for(t in this){delete this[t]}};e.CanvasLoader=t})(window);(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(typeof jQuery!="undefined"?jQuery:window.Zepto)}})(function(e){"use strict";function r(t){var n=t.data;if(!t.isDefaultPrevented()){t.preventDefault();e(t.target).ajaxSubmit(n)}}function i(t){var n=t.target;var r=e(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(i.length===0){return}n=i[0]}var s=this;s.clk=n;if(n.type=="image"){if(t.offsetX!==undefined){s.clk_x=t.offsetX;s.clk_y=t.offsetY}else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left;s.clk_y=t.pageY-o.top}else{s.clk_x=t.pageX-n.offsetLeft;s.clk_y=t.pageY-n.offsetTop}}setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function s(){if(!e.fn.ajaxSubmit.debug){return}var t="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(t)}else if(window.opera&&window.opera.postError){window.opera.postError(t)}}var t={};t.fileapi=e("<input type='file'/>").get(0).files!==undefined;t.formdata=window.FormData!==undefined;var n=!!e.fn.prop;e.fn.attr2=function(){if(!n){return this.attr.apply(this,arguments)}var e=this.prop.apply(this,arguments);if(e&&e.jquery||typeof e==="string"){return e}return this.attr.apply(this,arguments)};e.fn.ajaxSubmit=function(r){function k(t){var n=e.param(t,r.traditional).split("&");var i=n.length;var s=[];var o,u;for(o=0;o<i;o++){n[o]=n[o].replace(/\+/g," ");u=n[o].split("=");s.push([decodeURIComponent(u[0]),decodeURIComponent(u[1])])}return s}function L(t){var n=new FormData;for(var s=0;s<t.length;s++){n.append(t[s].name,t[s].value)}if(r.extraData){var o=k(r.extraData);for(s=0;s<o.length;s++){if(o[s]){n.append(o[s][0],o[s][1])}}}r.data=null;var u=e.extend(true,{},e.ajaxSettings,r,{contentType:false,processData:false,cache:false,type:i||"POST"});if(r.uploadProgress){u.xhr=function(){var t=e.ajaxSettings.xhr();if(t.upload){t.upload.addEventListener("progress",function(e){var t=0;var n=e.loaded||e.position;var i=e.total;if(e.lengthComputable){t=Math.ceil(n/i*100)}r.uploadProgress(e,n,i,t)},false)}return t}}u.data=null;var a=u.beforeSend;u.beforeSend=function(e,t){if(r.formData){t.data=r.formData}else{t.data=n}if(a){a.call(this,e,t)}};return e.ajax(u)}function A(t){function T(e){var t=null;try{if(e.contentWindow){t=e.contentWindow.document}}catch(n){s("cannot get iframe.contentWindow document: "+n)}if(t){return t}try{t=e.contentDocument?e.contentDocument:e.document}catch(n){s("cannot get iframe.contentDocument: "+n);t=e.document}return t}function k(){function f(){try{var e=T(v).readyState;s("state = "+e);if(e&&e.toLowerCase()=="uninitialized"){setTimeout(f,50)}}catch(t){s("Server abort: ",t," (",t.name,")");_(x);if(w){clearTimeout(w)}w=undefined}}var t=a.attr2("target"),n=a.attr2("action"),r="multipart/form-data",u=a.attr("enctype")||a.attr("encoding")||r;o.setAttribute("target",p);if(!i||/post/i.test(i)){o.setAttribute("method","POST")}if(n!=l.url){o.setAttribute("action",l.url)}if(!l.skipEncodingOverride&&(!i||/post/i.test(i))){a.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(l.timeout){w=setTimeout(function(){b=true;_(S)},l.timeout)}var c=[];try{if(l.extraData){for(var h in l.extraData){if(l.extraData.hasOwnProperty(h)){if(e.isPlainObject(l.extraData[h])&&l.extraData[h].hasOwnProperty("name")&&l.extraData[h].hasOwnProperty("value")){c.push(e('<input type="hidden" name="'+l.extraData[h].name+'">').val(l.extraData[h].value).appendTo(o)[0])}else{c.push(e('<input type="hidden" name="'+h+'">').val(l.extraData[h]).appendTo(o)[0])}}}}if(!l.iframeTarget){d.appendTo("body")}if(v.attachEvent){v.attachEvent("onload",_)}else{v.addEventListener("load",_,false)}setTimeout(f,15);try{o.submit()}catch(m){var g=document.createElement("form").submit;g.apply(o)}}finally{o.setAttribute("action",n);o.setAttribute("enctype",u);if(t){o.setAttribute("target",t)}else{a.removeAttr("target")}e(c).remove()}}function _(t){if(m.aborted||M){return}A=T(v);if(!A){s("cannot access response document");t=x}if(t===S&&m){m.abort("timeout");E.reject(m,"timeout");return}else if(t==x&&m){m.abort("server abort");E.reject(m,"error","server abort");return}if(!A||A.location.href==l.iframeSrc){if(!b){return}}if(v.detachEvent){v.detachEvent("onload",_)}else{v.removeEventListener("load",_,false)}var n="success",r;try{if(b){throw"timeout"}var i=l.dataType=="xml"||A.XMLDocument||e.isXMLDoc(A);s("isXml="+i);if(!i&&window.opera&&(A.body===null||!A.body.innerHTML)){if(--O){s("requeing onLoad callback, DOM not available");setTimeout(_,250);return}}var o=A.body?A.body:A.documentElement;m.responseText=o?o.innerHTML:null;m.responseXML=A.XMLDocument?A.XMLDocument:A;if(i){l.dataType="xml"}m.getResponseHeader=function(e){var t={"content-type":l.dataType};return t[e.toLowerCase()]};if(o){m.status=Number(o.getAttribute("status"))||m.status;m.statusText=o.getAttribute("statusText")||m.statusText}var u=(l.dataType||"").toLowerCase();var a=/(json|script|text)/.test(u);if(a||l.textarea){var f=A.getElementsByTagName("textarea")[0];if(f){m.responseText=f.value;m.status=Number(f.getAttribute("status"))||m.status;m.statusText=f.getAttribute("statusText")||m.statusText}else if(a){var c=A.getElementsByTagName("pre")[0];var p=A.getElementsByTagName("body")[0];if(c){m.responseText=c.textContent?c.textContent:c.innerText}else if(p){m.responseText=p.textContent?p.textContent:p.innerText}}}else if(u=="xml"&&!m.responseXML&&m.responseText){m.responseXML=D(m.responseText)}try{L=H(m,u,l)}catch(g){n="parsererror";m.error=r=g||n}}catch(g){s("error caught: ",g);n="error";m.error=r=g||n}if(m.aborted){s("upload aborted");n=null}if(m.status){n=m.status>=200&&m.status<300||m.status===304?"success":"error"}if(n==="success"){if(l.success){l.success.call(l.context,L,"success",m)}E.resolve(m.responseText,"success",m);if(h){e.event.trigger("ajaxSuccess",[m,l])}}else if(n){if(r===undefined){r=m.statusText}if(l.error){l.error.call(l.context,m,n,r)}E.reject(m,"error",r);if(h){e.event.trigger("ajaxError",[m,l,r])}}if(h){e.event.trigger("ajaxComplete",[m,l])}if(h&&!--e.active){e.event.trigger("ajaxStop")}if(l.complete){l.complete.call(l.context,m,n)}M=true;if(l.timeout){clearTimeout(w)}setTimeout(function(){if(!l.iframeTarget){d.remove()}else{d.attr("src",l.iframeSrc)}m.responseXML=null},100)}var o=a[0],u,f,l,h,p,d,v,m,g,y,b,w;var E=e.Deferred();E.abort=function(e){m.abort(e)};if(t){for(f=0;f<c.length;f++){u=e(c[f]);if(n){u.prop("disabled",false)}else{u.removeAttr("disabled")}}}l=e.extend(true,{},e.ajaxSettings,r);l.context=l.context||l;p="jqFormIO"+(new Date).getTime();if(l.iframeTarget){d=e(l.iframeTarget);y=d.attr2("name");if(!y){d.attr2("name",p)}else{p=y}}else{d=e('<iframe name="'+p+'" src="'+l.iframeSrc+'" />');d.css({position:"absolute",top:"-1000px",left:"-1000px"})}v=d[0];m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n=t==="timeout"?"timeout":"aborted";s("aborting upload... "+n);this.aborted=1;try{if(v.contentWindow.document.execCommand){v.contentWindow.document.execCommand("Stop")}}catch(r){}d.attr("src",l.iframeSrc);m.error=n;if(l.error){l.error.call(l.context,m,n,t)}if(h){e.event.trigger("ajaxError",[m,l,n])}if(l.complete){l.complete.call(l.context,m,n)}}};h=l.global;if(h&&0===e.active++){e.event.trigger("ajaxStart")}if(h){e.event.trigger("ajaxSend",[m,l])}if(l.beforeSend&&l.beforeSend.call(l.context,m,l)===false){if(l.global){e.active--}E.reject();return E}if(m.aborted){E.reject();return E}g=o.clk;if(g){y=g.name;if(y&&!g.disabled){l.extraData=l.extraData||{};l.extraData[y]=g.value;if(g.type=="image"){l.extraData[y+".x"]=o.clk_x;l.extraData[y+".y"]=o.clk_y}}}var S=1;var x=2;var N=e("meta[name=csrf-token]").attr("content");var C=e("meta[name=csrf-param]").attr("content");if(C&&N){l.extraData=l.extraData||{};l.extraData[C]=N}if(l.forceSync){k()}else{setTimeout(k,10)}var L,A,O=50,M;var D=e.parseXML||function(e,t){if(window.ActiveXObject){t=new ActiveXObject("Microsoft.XMLDOM");t.async="false";t.loadXML(e)}else{t=(new DOMParser).parseFromString(e,"text/xml")}return t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null};var P=e.parseJSON||function(e){return window["eval"]("("+e+")")};var H=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;if(s&&o.documentElement.nodeName==="parsererror"){if(e.error){e.error("parsererror")}}if(r&&r.dataFilter){o=r.dataFilter(o,n)}if(typeof o==="string"){if(n==="json"||!n&&i.indexOf("json")>=0){o=P(o)}else if(n==="script"||!n&&i.indexOf("javascript")>=0){e.globalEval(o)}}return o};return E}if(!this.length){s("ajaxSubmit: skipping submit process - no element selected");return this}var i,o,u,a=this;if(typeof r=="function"){r={success:r}}else if(r===undefined){r={}}i=r.type||this.attr2("method");o=r.url||this.attr2("action");u=typeof o==="string"?e.trim(o):"";u=u||window.location.href||"";if(u){u=(u.match(/^([^#]+)/)||[])[1]}r=e.extend(true,{url:u,success:e.ajaxSettings.success,type:i||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r);var f={};this.trigger("form-pre-serialize",[this,r,f]);if(f.veto){s("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(r.beforeSerialize&&r.beforeSerialize(this,r)===false){s("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var l=r.traditional;if(l===undefined){l=e.ajaxSettings.traditional}var c=[];var h,p=this.formToArray(r.semantic,c);if(r.data){r.extraData=r.data;h=e.param(r.data,l)}if(r.beforeSubmit&&r.beforeSubmit(p,this,r)===false){s("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[p,this,r,f]);if(f.veto){s("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var d=e.param(p,l);if(h){d=d?d+"&"+h:h}if(r.type.toUpperCase()=="GET"){r.url+=(r.url.indexOf("?")>=0?"&":"?")+d;r.data=null}else{r.data=d}var v=[];if(r.resetForm){v.push(function(){a.resetForm()})}if(r.clearForm){v.push(function(){a.clearForm(r.includeHidden)})}if(!r.dataType&&r.target){var m=r.success||function(){};v.push(function(t){var n=r.replaceTarget?"replaceWith":"html";e(r.target)[n](t).each(m,arguments)})}else if(r.success){v.push(r.success)}r.success=function(e,t,n){var i=r.context||this;for(var s=0,o=v.length;s<o;s++){v[s].apply(i,[e,t,n||a,a])}};if(r.error){var g=r.error;r.error=function(e,t,n){var i=r.context||this;g.apply(i,[e,t,n,a])}}if(r.complete){var y=r.complete;r.complete=function(e,t){var n=r.context||this;y.apply(n,[e,t,a])}}var b=e("input[type=file]:enabled",this).filter(function(){return e(this).val()!==""});var w=b.length>0;var E="multipart/form-data";var S=a.attr("enctype")==E||a.attr("encoding")==E;var x=t.fileapi&&t.formdata;s("fileAPI :"+x);var T=(w||S)&&!x;var N;if(r.iframe!==false&&(r.iframe||T)){if(r.closeKeepAlive){e.get(r.closeKeepAlive,function(){N=A(p)})}else{N=A(p)}}else if((w||S)&&x){N=L(p)}else{N=e.ajax(r)}a.removeData("jqxhr").data("jqxhr",N);for(var C=0;C<c.length;C++){c[C]=null}this.trigger("form-submit-notify",[this,r]);return this};e.fn.ajaxForm=function(t){t=t||{};t.delegation=t.delegation&&e.isFunction(e.fn.on);if(!t.delegation&&this.length===0){var n={s:this.selector,c:this.context};if(!e.isReady&&n.s){s("DOM not ready, queuing ajaxForm");e(function(){e(n.s,n.c).ajaxForm(t)});return this}s("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)"));return this}if(t.delegation){e(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,t,r).on("click.form-plugin",this.selector,t,i);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",t,r).bind("click.form-plugin",t,i)};e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};e.fn.formToArray=function(n,r){var i=[];if(this.length===0){return i}var s=this[0];var o=this.attr("id");var u=n?s.getElementsByTagName("*"):s.elements;var a;if(u){u=e(u).get()}if(o){a=e(":input[form="+o+"]").get();if(a.length){u=(u||[]).concat(a)}}if(!u||!u.length){return i}var f,l,c,h,p,d,v;for(f=0,d=u.length;f<d;f++){p=u[f];c=p.name;if(!c||p.disabled){continue}if(n&&s.clk&&p.type=="image"){if(s.clk==p){i.push({name:c,value:e(p).val(),type:p.type});i.push({name:c+".x",value:s.clk_x},{name:c+".y",value:s.clk_y})}continue}h=e.fieldValue(p,true);if(h&&h.constructor==Array){if(r){r.push(p)}for(l=0,v=h.length;l<v;l++){i.push({name:c,value:h[l]})}}else if(t.fileapi&&p.type=="file"){if(r){r.push(p)}var m=p.files;if(m.length){for(l=0;l<m.length;l++){i.push({name:c,value:m[l],type:p.type})}}else{i.push({name:c,value:"",type:p.type})}}else if(h!==null&&typeof h!="undefined"){if(r){r.push(p)}i.push({name:c,value:h,type:p.type,required:p.required})}}if(!n&&s.clk){var g=e(s.clk),y=g[0];c=y.name;if(c&&!y.disabled&&y.type=="image"){i.push({name:c,value:g.val()});i.push({name:c+".x",value:s.clk_x},{name:c+".y",value:s.clk_y})}}return i};e.fn.formSerialize=function(t){return e.param(this.formToArray(t))};e.fn.fieldSerialize=function(t){var n=[];this.each(function(){var r=this.name;if(!r){return}var i=e.fieldValue(this,t);if(i&&i.constructor==Array){for(var s=0,o=i.length;s<o;s++){n.push({name:r,value:i[s]})}}else if(i!==null&&typeof i!="undefined"){n.push({name:this.name,value:i})}});return e.param(n)};e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r];var o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length){continue}if(o.constructor==Array){e.merge(n,o)}else{n.push(o)}}return n};e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();if(n===undefined){n=true}if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1)){return null}if(s=="select"){var o=t.selectedIndex;if(o<0){return null}var u=[],a=t.options;var f=i=="select-one";var l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;if(!p){p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value}if(f){return p}u.push(p)}}return u}return e(t).val()};e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})};e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();if(n.test(r)||i=="textarea"){this.value=""}else if(r=="checkbox"||r=="radio"){this.checked=false}else if(i=="select"){this.selectedIndex=-1}else if(r=="file"){if(/MSIE/.test(navigator.userAgent)){e(this).replaceWith(e(this).clone(true))}else{e(this).val("")}}else if(t){if(t===true&&/hidden/.test(r)||typeof t=="string"&&e(this).is(t)){this.value=""}}})};e.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType){this.reset()}})};e.fn.enable=function(e){if(e===undefined){e=true}return this.each(function(){this.disabled=!e})};e.fn.selected=function(t){if(t===undefined){t=true}return this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio"){this.checked=t}else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");if(t&&r[0]&&r[0].type=="select-one"){r.find("option").selected(false)}this.selected=t}})};e.fn.ajaxSubmit.debug=false});(function(){jQuery.fn.clearForm=function(){jQuery(":input",this).each(function(){var e=jQuery(this).get(0).type;var t=jQuery(this).get(0).tagName.toLowerCase();if(e=="text"||e=="password"||t=="textarea"){if((this.id=="billing:postcode"||this.id=="shipping:postcode")&&this.value=="."){this.value=""}if(this.id!="billing:city"&&this.id!="billing:taxvat"&&this.id!="billing:day"&&this.id!="billing:month"&&this.id!="billing:year"&&this.id!="billing:postcode"&&this.id!="billing:region"&&this.id!="shipping:city"&&this.id!="shipping:postcode"&&this.id!="shipping:region"){if(isLogged&&this.id!="billing:email"||!isLogged){this.value=""}}else if(this.value=="n/a"){this.value=""}}else if((e=="checkbox"||e=="radio")&&this.id!="register_new_account"){this.checked=false}else if(t=="select"){if(this.id!="billing:country_id"&&this.id!="shipping:country_id"&&this.id!="billing:region_id"&&this.id!="shipping:region_id"){this.selectedIndex=-1}}})}})(jQuery);(function(e){var t,n,r,i,s,o,u,a,f,l,c=0,h={},p=[],d=0,v={},m=[],g=null,y=new Image,b=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,w=/[^\.]\.(swf)\s*$/i,E,S=1,x=0,T="",N,C,k=false,L=e.extend(e("<div/>")[0],{prop:0}),A=e.browser.msie&&e.browser.version<7&&!window.XMLHttpRequest,O=function(){n.hide();y.onerror=y.onload=null;if(g){g.abort()}t.empty()},M=function(){if(false===h.onError(p,c,h)){n.hide();k=false;return}h.titleShow=false;h.width="auto";h.height="auto";t.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');D()},_=function(){var r=p[c],i,s,u,a,f,l;O();h=e.extend({},e.fn.fancybox.defaults,typeof e(r).data("fancybox")=="undefined"?h:e(r).data("fancybox"));l=h.onStart(p,c,h);if(l===false){k=false;return}else if(typeof l=="object"){h=e.extend(h,l)}u=h.title||(r.nodeName?e(r).attr("title"):r.title)||"";if(r.nodeName&&!h.orig){h.orig=e(r).children("img:first").length?e(r).children("img:first"):e(r)}if(u===""&&h.orig&&h.titleFromAlt){u=h.orig.attr("alt")}i=h.href||(r.nodeName?e(r).attr("href"):r.href)||null;if(/^(?:javascript)/i.test(i)||i=="#"){i=null}if(h.type){s=h.type;if(!i){i=h.content}}else if(h.content){s="html"}else if(i){if(i.match(b)){s="image"}else if(i.match(w)){s="swf"}else if(e(r).hasClass("iframe")){s="iframe"}else if(i.indexOf("#")===0){s="inline"}else{s="ajax"}}if(!s){M();return}if(s=="inline"){r=i.substr(i.indexOf("#"));s=e(r).length>0?"inline":"ajax"}h.type=s;h.href=i;h.title=u;if(h.autoDimensions){if(h.type=="html"||h.type=="inline"||h.type=="ajax"){h.width="auto";h.height="auto"}else{h.autoDimensions=false}}if(h.modal){h.overlayShow=true;h.hideOnOverlayClick=false;h.hideOnContentClick=false;h.enableEscapeButton=false;h.showCloseButton=false}h.padding=parseInt(h.padding,10);h.margin=parseInt(h.margin,10);t.css("padding",h.padding+h.margin);e(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){e(this).replaceWith(o.children())});switch(s){case"html":t.html(h.content);D();break;case"inline":if(e(r).parent().is("#fancybox-content")===true){k=false;return}e('<div class="fancybox-inline-tmp" />').hide().insertBefore(e(r)).bind("fancybox-cleanup",function(){e(this).replaceWith(o.children())}).bind("fancybox-cancel",function(){e(this).replaceWith(t.children())});e(r).appendTo(t);D();break;case"image":k=false;e.fancybox.showActivity();y=new Image;y.onerror=function(){M()};y.onload=function(){k=true;y.onerror=y.onload=null;P()};y.src=i;break;case"swf":h.scrolling="no";a='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+h.width+'" height="'+h.height+'"><param name="movie" value="'+i+'"></param>';f="";e.each(h.swf,function(e,t){a+='<param name="'+e+'" value="'+t+'"></param>';f+=" "+e+'="'+t+'"'});a+='<embed src="'+i+'" type="application/x-shockwave-flash" width="'+h.width+'" height="'+h.height+'"'+f+"></embed></object>";t.html(a);D();break;case"ajax":k=false;e.fancybox.showActivity();h.ajax.win=h.ajax.success;g=e.ajax(e.extend({},h.ajax,{url:i,data:h.ajax.data||{},error:function(e,t,n){if(e.status>0){M()}},success:function(e,r,s){var o=typeof s=="object"?s:g;if(o.status==200){if(typeof h.ajax.win=="function"){l=h.ajax.win(i,e,r,s);if(l===false){n.hide();return}else if(typeof l=="string"||typeof l=="object"){e=l}}t.html(e);D()}}}));break;case"iframe":H();break}},D=function(){var n=h.width,r=h.height;if(n.toString().indexOf("%")>-1){n=parseInt((e(window).width()-h.margin*2)*parseFloat(n)/100,10)+"px"}else{n=n=="auto"?"auto":n+"px"}if(r.toString().indexOf("%")>-1){r=parseInt((e(window).height()-h.margin*2)*parseFloat(r)/100,10)+"px"}else{r=r=="auto"?"auto":r+"px"}t.wrapInner('<div style="width:'+n+";height:"+r+";overflow: "+(h.scrolling=="auto"?"auto":h.scrolling=="yes"?"scroll":"hidden")+';position:relative;"></div>');h.width=t.width();h.height=t.height();H()},P=function(){h.width=y.width;h.height=y.height;e("<img />").attr({id:"fancybox-img",src:y.src,alt:h.title}).appendTo(t);H()},H=function(){var s,g;n.hide();if(i.is(":visible")&&false===v.onCleanup(m,d,v)){e.event.trigger("fancybox-cancel");k=false;return}k=true;e(o.add(r)).unbind();e(window).unbind("resize.fb scroll.fb");e(document).unbind("keydown.fb");if(i.is(":visible")&&v.titlePosition!=="outside"){i.css("height",i.height())}m=p;d=c;v=h;if(v.overlayShow){r.css({"background-color":v.overlayColor,opacity:v.overlayOpacity,cursor:v.hideOnOverlayClick?"pointer":"auto",height:e(document).height()});if(!r.is(":visible")){if(A){e("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"})}r.show()}}else{r.hide()}C=z();j();if(i.is(":visible")){e(u.add(f).add(l)).hide();s=i.position(),N={top:s.top,left:s.left,width:i.width(),height:i.height()};g=N.width==C.width&&N.height==C.height;o.fadeTo(v.changeFade,.3,function(){var n=function(){o.html(t.contents()).fadeTo(v.changeFade,1,I)};e.event.trigger("fancybox-change");o.empty().removeAttr("filter").css({"border-width":v.padding,width:C.width-v.padding*2,height:h.autoDimensions?"auto":C.height-x-v.padding*2});if(g){n()}else{L.prop=0;e(L).animate({prop:1},{duration:v.changeSpeed,easing:v.easingChange,step:R,complete:n})}});return}i.removeAttr("style");o.css("border-width",v.padding);if(v.transitionIn=="elastic"){N=X();o.html(t.contents());i.show();if(v.opacity){C.opacity=0}L.prop=0;e(L).animate({prop:1},{duration:v.speedIn,easing:v.easingIn,step:R,complete:I});return}if(v.titlePosition=="inside"&&x>0){a.show()}o.css({width:C.width-v.padding*2,height:h.autoDimensions?"auto":C.height-x-v.padding*2}).html(t.contents());i.css(C).fadeIn(v.transitionIn=="none"?0:v.speedIn,I)},B=function(e){if(e&&e.length){if(v.titlePosition=="float"){return'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+e+'</td><td id="fancybox-title-float-right"></td></tr></table>'}return'<div id="fancybox-title-'+v.titlePosition+'">'+e+"</div>"}return false},j=function(){T=v.title||"";x=0;a.empty().removeAttr("style").removeClass();if(v.titleShow===false){a.hide();return}T=e.isFunction(v.titleFormat)?v.titleFormat(T,m,d,v):B(T);if(!T||T===""){a.hide();return}a.addClass("fancybox-title-"+v.titlePosition).html(T).appendTo("body").show();switch(v.titlePosition){case"inside":a.css({width:C.width-v.padding*2,marginLeft:v.padding,marginRight:v.padding});x=a.outerHeight(true);a.appendTo(s);C.height+=x;break;case"over":a.css({marginLeft:v.padding,width:C.width-v.padding*2,bottom:v.padding}).appendTo(s);break;case"float":a.css("left",parseInt((a.width()-C.width-40)/2,10)*-1).appendTo(i);break;default:a.css({width:C.width-v.padding*2,paddingLeft:v.padding,paddingRight:v.padding}).appendTo(i);break}a.hide()},F=function(){if(v.enableEscapeButton||v.enableKeyboardNav){e(document).bind("keydown.fb",function(t){if(t.keyCode==27&&v.enableEscapeButton){t.preventDefault();e.fancybox.close()}else if((t.keyCode==37||t.keyCode==39)&&v.enableKeyboardNav&&t.target.tagName!=="INPUT"&&t.target.tagName!=="TEXTAREA"&&t.target.tagName!=="SELECT"){t.preventDefault();e.fancybox[t.keyCode==37?"prev":"next"]()}})}if(!v.showNavArrows){f.hide();l.hide();return}if(v.cyclic&&m.length>1||d!==0){f.show()}if(v.cyclic&&m.length>1||d!=m.length-1){l.show()}},I=function(){if(!e.support.opacity){o.get(0).style.removeAttribute("filter");i.get(0).style.removeAttribute("filter")}if(h.autoDimensions){o.css("height","auto")}i.css("height","auto");if(T&&T.length){a.show()}if(v.showCloseButton){u.show()}F();if(v.hideOnContentClick){o.bind("click",e.fancybox.close)}if(v.hideOnOverlayClick){r.bind("click",e.fancybox.close)}e(window).bind("resize.fb",e.fancybox.resize);if(v.centerOnScroll){e(window).bind("scroll.fb",e.fancybox.center)}if(v.type=="iframe"){e('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(e.browser.msie?'allowtransparency="true""':"")+' scrolling="'+h.scrolling+'" src="'+v.href+'"></iframe>').appendTo(o)}i.show();k=false;e.fancybox.center();v.onComplete(m,d,v);q()},q=function(){var e,t;if(m.length-1>d){e=m[d+1].href;if(typeof e!=="undefined"&&e.match(b)){t=new Image;t.src=e}}if(d>0){e=m[d-1].href;if(typeof e!=="undefined"&&e.match(b)){t=new Image;t.src=e}}},R=function(e){var t={width:parseInt(N.width+(C.width-N.width)*e,10),height:parseInt(N.height+(C.height-N.height)*e,10),top:parseInt(N.top+(C.top-N.top)*e,10),left:parseInt(N.left+(C.left-N.left)*e,10)};if(typeof C.opacity!=="undefined"){t.opacity=e<.5?.5:e}i.css(t);o.css({width:t.width-v.padding*2,height:t.height-x*e-v.padding*2})},U=function(){return[e(window).width()-v.margin*2,e(window).height()-v.margin*2,e(document).scrollLeft()+v.margin,e(document).scrollTop()+v.margin]},z=function(){var e=U(),t={},n=v.autoScale,r=v.padding*2,i;if(v.width.toString().indexOf("%")>-1){t.width=parseInt(e[0]*parseFloat(v.width)/100,10)}else{t.width=v.width+r}if(v.height.toString().indexOf("%")>-1){t.height=parseInt(e[1]*parseFloat(v.height)/100,10)}else{t.height=v.height+r}if(n&&(t.width>e[0]||t.height>e[1])){if(h.type=="image"||h.type=="swf"){i=v.width/v.height;if(t.width>e[0]){t.width=e[0];t.height=parseInt((t.width-r)/i+r,10)}if(t.height>e[1]){t.height=e[1];t.width=parseInt((t.height-r)*i+r,10)}}else{t.width=Math.min(t.width,e[0]);t.height=Math.min(t.height,e[1])}}t.top=parseInt(Math.max(e[3]-20,e[3]+(e[1]-t.height-40)*.5),10);t.left=parseInt(Math.max(e[2]-20,e[2]+(e[0]-t.width-40)*.5),10);return t},W=function(e){var t=e.offset();t.top+=parseInt(e.css("paddingTop"),10)||0;t.left+=parseInt(e.css("paddingLeft"),10)||0;t.top+=parseInt(e.css("border-top-width"),10)||0;t.left+=parseInt(e.css("border-left-width"),10)||0;t.width=e.width();t.height=e.height();return t},X=function(){var t=h.orig?e(h.orig):false,n={},r,i;if(t&&t.length){r=W(t);n={width:r.width+v.padding*2,height:r.height+v.padding*2,top:r.top-v.padding-20,left:r.left-v.padding-20}}else{i=U();n={width:v.padding*2,height:v.padding*2,top:parseInt(i[3]+i[1]*.5,10),left:parseInt(i[2]+i[0]*.5,10)}}return n},V=function(){if(!n.is(":visible")){clearInterval(E);return}e("div",n).css("top",S*-40+"px");S=(S+1)%12};e.fn.fancybox=function(t){if(!e(this).length){return this}e(this).data("fancybox",e.extend({},t,e.metadata?e(this).metadata():{})).unbind("click.fb").bind("click.fb",function(t){t.preventDefault();if(k){return}k=true;e(this).blur();p=[];c=0;var n=e(this).attr("rel")||"";if(!n||n==""||n==="nofollow"){p.push(this)}else{p=e("a[rel="+n+"], area[rel="+n+"]");c=p.index(this)}_();return});return this};e.fancybox=function(t){var n;if(k){return}k=true;n=typeof arguments[1]!=="undefined"?arguments[1]:{};p=[];c=parseInt(n.index,10)||0;if(e.isArray(t)){for(var r=0,i=t.length;r<i;r++){if(typeof t[r]=="object"){e(t[r]).data("fancybox",e.extend({},n,t[r]))}else{t[r]=e({}).data("fancybox",e.extend({content:t[r]},n))}}p=jQuery.merge(p,t)}else{if(typeof t=="object"){e(t).data("fancybox",e.extend({},n,t))}else{t=e({}).data("fancybox",e.extend({content:t},n))}p.push(t)}if(c>p.length||c<0){c=0}_()};e.fancybox.showActivity=function(){clearInterval(E);n.show();E=setInterval(V,66)};e.fancybox.hideActivity=function(){n.hide()};e.fancybox.next=function(){return e.fancybox.pos(d+1)};e.fancybox.prev=function(){return e.fancybox.pos(d-1)};e.fancybox.pos=function(e){if(k){return}e=parseInt(e);p=m;if(e>-1&&e<m.length){c=e;_()}else if(v.cyclic&&m.length>1){c=e>=m.length?0:m.length-1;_()}return};e.fancybox.cancel=function(){if(k){return}k=true;e.event.trigger("fancybox-cancel");O();h.onCancel(p,c,h);k=false};e.fancybox.close=function(){function t(){r.fadeOut("fast");a.empty().hide();i.hide();e.event.trigger("fancybox-cleanup");o.empty();v.onClosed(m,d,v);m=h=[];d=c=0;v=h={};k=false}if(k||i.is(":hidden")){return}k=true;if(v&&false===v.onCleanup(m,d,v)){k=false;return}O();e(u.add(f).add(l)).hide();e(o.add(r)).unbind();e(window).unbind("resize.fb scroll.fb");e(document).unbind("keydown.fb");o.find("iframe").attr("src",A&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank");if(v.titlePosition!=="inside"){a.empty()}i.stop();if(v.transitionOut=="elastic"){N=X();var n=i.position();C={top:n.top,left:n.left,width:i.width(),height:i.height()};if(v.opacity){C.opacity=1}a.empty().hide();L.prop=1;e(L).animate({prop:0},{duration:v.speedOut,easing:v.easingOut,step:R,complete:t})}else{i.fadeOut(v.transitionOut=="none"?0:v.speedOut,t)}};e.fancybox.resize=function(){if(r.is(":visible")){r.css("height",e(document).height())}e.fancybox.center(true)};e.fancybox.center=function(){var e,t;if(k){return}t=arguments[0]===true?1:0;e=U();if(!t&&(i.width()>e[0]||i.height()>e[1])){return}i.stop().animate({top:parseInt(Math.max(e[3]-20,e[3]+(e[1]-o.height()-40)*.5-v.padding)),left:parseInt(Math.max(e[2]-20,e[2]+(e[0]-o.width()-40)*.5-v.padding))},typeof arguments[0]=="number"?arguments[0]:200)};e.fancybox.init=function(){e("body").append(t=e('<div id="fancybox-tmp"></div>'),n=e('<div id="fancybox-loading"><div></div></div>'),r=e('<div id="fancybox-overlay"></div>'),i=e('<div id="fancybox-wrap" class="mw-osc-fancybox-wrap"></div>'));s=e('<div id="fancybox-outer"></div>').appendTo(i);s.append(o=e('<div id="fancybox-content"></div>'),u=e('<button id="fancybox-close" class="button" type="button"><span><span>'+Translator.translate("Close")+"</span></span></button>"),a=e('<div id="fancybox-title"></div>'),f=e('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),l=e('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));u.click(e.fancybox.close);n.click(e.fancybox.cancel);f.click(function(t){t.preventDefault();e.fancybox.prev()});l.click(function(t){t.preventDefault();e.fancybox.next()});if(e.fn.mousewheel){i.bind("mousewheel.fb",function(t,n){if(k){t.preventDefault()}else if(e(t.target).get(0).clientHeight==0||e(t.target).get(0).scrollHeight===e(t.target).get(0).clientHeight){t.preventDefault();e.fancybox[n>0?"prev":"next"]()}})}if(!e.support.opacity){i.addClass("fancybox-ie")}if(A){n.addClass("fancybox-ie6");i.addClass("fancybox-ie6");e('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(s)}};e.fn.fancybox.defaults={padding:0,margin:0,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:.7,overlayColor:"#666",titleShow:true,titlePosition:"float",titleFormat:null,titleFromAlt:false,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};e(document).ready(function(){e.fancybox.init()})})(jQuery);(function(e,t){function n(t){return!e(t).parents().andSelf().filter(function(){return e.curCSS(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{};if(!e.ui.version){e.extend(e.ui,{version:"1.8.6",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t==="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus();n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){n=e(this[0]);for(var r;n.length&&n[0]!==document;){r=n.css("position");if(r==="absolute"||r==="relative"||r==="fixed"){r=parseInt(n.css("zIndex"),10);if(!isNaN(r)&&r!==0)return r}n=n.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});e.each(["Width","Height"],function(n,r){function i(t,n,r,i){e.each(s,function(){n-=parseFloat(e.curCSS(t,"padding"+this,true))||0;if(r)n-=parseFloat(e.curCSS(t,"border"+this+"Width",true))||0;if(i)n-=parseFloat(e.curCSS(t,"margin"+this,true))||0});return n}var s=r==="Width"?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),u={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){if(n===t)return u["inner"+r].call(this);return this.each(function(){e(this).css(o,i(this,n)+"px")})};e.fn["outer"+r]=function(t,n){if(typeof t!=="number")return u["outer"+r].call(this,t);return this.each(function(){e(this).css(o,i(this,t,true,n)+"px")})}});e.extend(e.expr[":"],{data:function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){var r=t.nodeName.toLowerCase(),i=e.attr(t,"tabindex");if("area"===r){r=t.parentNode;i=r.name;if(!t.href||!i||r.nodeName.toLowerCase()!=="map")return false;t=e("img[usemap=#"+i+"]")[0];return!!t&&n(t)}return(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"==r?t.href||!isNaN(i):!isNaN(i))&&n(t)},tabbable:function(t){var n=e.attr(t,"tabindex");return(isNaN(n)||n>=0)&&e(t).is(":focusable")}});e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});e.support.minHeight=n.offsetHeight===100;e.support.selectstart="onselectstart"in n;t.removeChild(n).style.display="none"});e.extend(e.ui,{plugin:{add:function(t,n,r){t=e.ui[t].prototype;for(var i in r){t.plugins[i]=t.plugins[i]||[];t.plugins[i].push([n,r[i]])}},call:function(e,t,n){if((t=e.plugins[t])&&e.element[0].parentNode)for(var r=0;r<t.length;r++)e.options[t[r][0]]&&t[r][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?e.compareDocumentPosition(t)&16:e!==t&&e.contains(t)},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return false;n=n&&n==="left"?"scrollLeft":"scrollTop";var r=false;if(t[n]>0)return true;t[n]=1;r=t[n]>0;t[n]=0;return r},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}})(jQuery);(function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var r=0,i;(i=t[r])!=null;r++)e(i).triggerHandler("remove");n(t)}}else{var r=e.fn.remove;e.fn.remove=function(t,n){return this.each(function(){if(!n)if(!t||e.filter(t,[this]).length)e("*",this).add([this]).each(function(){e(this).triggerHandler("remove")});return r.call(e(this),t,n)})}}e.widget=function(t,n,r){var i=t.split(".")[0],s;t=t.split(".")[1];s=i+"-"+t;if(!r){r=n;n=e.Widget}e.expr[":"][s]=function(n){return!!e.data(n,t)};e[i]=e[i]||{};e[i][t]=function(e,t){arguments.length&&this._createWidget(e,t)};n=new n;n.options=e.extend(true,{},n.options);e[i][t].prototype=e.extend(true,n,{namespace:i,widgetName:t,widgetEventPrefix:e[i][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},r);e.widget.bridge(t,e[i][t])};e.widget.bridge=function(n,r){e.fn[n]=function(i){var s=typeof i==="string",o=Array.prototype.slice.call(arguments,1),u=this;i=!s&&o.length?e.extend.apply(null,[true,i].concat(o)):i;if(s&&i.charAt(0)==="_")return u;s?this.each(function(){var r=e.data(this,n),s=r&&e.isFunction(r[i])?r[i].apply(r,o):r;if(s!==r&&s!==t){u=s;return false}}):this.each(function(){var t=e.data(this,n);t?t.option(i||{})._init():e.data(this,n,new r(i,this))});return u}};e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)};e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(t,n){e.data(n,this.widgetName,this);this.element=e(n);this.options=e.extend(true,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("remove."+this.widgetName,function(){r.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(n,r){var i=n;if(arguments.length===0)return e.extend({},this.options);if(typeof n==="string"){if(r===t)return this.options[n];i={};i[n]=r}this._setOptions(i);return this},_setOptions:function(t){var n=this;e.each(t,function(e,t){n._setOption(e,t)});return this},_setOption:function(e,t){this.options[e]=t;if(e==="disabled")this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(t,n,r){var i=this.options[t];n=e.Event(n);n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase();r=r||{};if(n.originalEvent){t=e.event.props.length;for(var s;t;){s=e.event.props[--t];n[s]=n.originalEvent[s]}}this.element.trigger(n,r);return!(e.isFunction(i)&&i.call(this.element[0],n,r)===false||n.isDefaultPrevented())}}})(jQuery);(function(e){e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){if(e._preventClickEvent){e._preventClickEvent=false;t.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){t.originalEvent=t.originalEvent||{};if(!t.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(t);this._mouseDownEvent=t;var n=this,r=t.which==1,i=typeof this.options.cancel=="string"?e(t.target).parents().add(t.target).filter(this.options.cancel).length:false;if(!r||i||!this._mouseCapture(t))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==false;if(!this._mouseStarted){t.preventDefault();return true}}this._mouseMoveDelegate=function(e){return n._mouseMove(e)};this._mouseUpDelegate=function(e){return n._mouseUp(e)};e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);t.preventDefault();return t.originalEvent.mouseHandled=true}},_mouseMove:function(t){if(e.browser.msie&&!(document.documentMode>=9)&&!t.button)return this._mouseUp(t);if(this._mouseStarted){this._mouseDrag(t);return t.preventDefault()}if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==false)?this._mouseDrag(t):this._mouseUp(t);return!this._mouseStarted},_mouseUp:function(t){e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=t.target==this._mouseDownEvent.target;this._mouseStop(t)}return false},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);(function(e){e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var t=this,n=this.options;this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");n.disabled&&this.element.addClass("ui-slider-disabled ui-disabled");this.range=e([]);if(n.range){if(n.range===true){this.range=e("<div></div>");if(!n.values)n.values=[this._valueMin(),this._valueMin()];if(n.values.length&&n.values.length!==2)n.values=[n.values[0],n.values[0]]}else this.range=e("<div></div>");this.range.appendTo(this.element).addClass("ui-slider-range");if(n.range==="min"||n.range==="max")this.range.addClass("ui-slider-range-"+n.range);this.range.addClass("ui-widget-header")}e(".ui-slider-handle",this.element).length===0&&e("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");if(n.values&&n.values.length)for(;e(".ui-slider-handle",this.element).length<n.values.length;)e("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");this.handles=e(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){n.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){if(n.disabled)e(this).blur();else{e(".ui-slider .ui-state-focus").removeClass("ui-state-focus");e(this).addClass("ui-state-focus")}}).blur(function(){e(this).removeClass("ui-state-focus")});this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)});this.handles.keydown(function(n){var r=true,i=e(this).data("index.ui-slider-handle"),s,o,u;if(!t.options.disabled){switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:r=false;if(!t._keySliding){t._keySliding=true;e(this).addClass("ui-state-active");s=t._start(n,i);if(s===false)return}break}u=t.options.step;s=t.options.values&&t.options.values.length?o=t.values(i):o=t.value();switch(n.keyCode){case e.ui.keyCode.HOME:o=t._valueMin();break;case e.ui.keyCode.END:o=t._valueMax();break;case e.ui.keyCode.PAGE_UP:o=t._trimAlignValue(s+(t._valueMax()-t._valueMin())/5);break;case e.ui.keyCode.PAGE_DOWN:o=t._trimAlignValue(s-(t._valueMax()-t._valueMin())/5);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===t._valueMax())return;o=t._trimAlignValue(s+u);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===t._valueMin())return;o=t._trimAlignValue(s-u);break}t._slide(n,i,o);return r}}).keyup(function(n){var r=e(this).data("index.ui-slider-handle");if(t._keySliding){t._keySliding=false;t._stop(n,r);t._change(n,r);e(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(t){var n=this.options,r,i,s,o,u;if(n.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();r=this._normValueFromMouse({x:t.pageX,y:t.pageY});i=this._valueMax()-this._valueMin()+1;o=this;this.handles.each(function(t){var n=Math.abs(r-o.values(t));if(i>n){i=n;s=e(this);u=t}});if(n.range===true&&this.values(1)===n.min){u+=1;s=e(this.handles[u])}if(this._start(t,u)===false)return false;this._mouseSliding=true;o._handleIndex=u;s.addClass("ui-state-active").focus();n=s.offset();this._clickOffset=!e(t.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:t.pageX-n.left-s.width()/2,top:t.pageY-n.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)};this._slide(t,u,r);return this._animateOff=true},_mouseStart:function(){return true},_mouseDrag:function(e){var t=this._normValueFromMouse({x:e.pageX,y:e.pageY});this._slide(e,this._handleIndex,t);return false},_mouseStop:function(e){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(e,this._handleIndex);this._change(e,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t;if(this.orientation==="horizontal"){t=this.elementSize.width;e=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{t=this.elementSize.height;e=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}t=e/t;if(t>1)t=1;if(t<0)t=0;if(this.orientation==="vertical")t=1-t;e=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+t*e)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};if(this.options.values&&this.options.values.length){n.value=this.values(t);n.values=this.values()}return this._trigger("start",e,n)},_slide:function(e,t,n){var r;if(this.options.values&&this.options.values.length){r=this.values(t?0:1);if(this.options.values.length===2&&this.options.range===true&&(t===0&&n>r||t===1&&n<r))n=r;if(n!==this.values(t)){r=this.values();r[t]=n;e=this._trigger("slide",e,{handle:this.handles[t],value:n,values:r});this.values(t?0:1);e!==false&&this.values(t,n,true)}}else if(n!==this.value()){e=this._trigger("slide",e,{handle:this.handles[t],value:n});e!==false&&this.value(n)}},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};if(this.options.values&&this.options.values.length){n.value=this.values(t);n.values=this.values()}this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};if(this.options.values&&this.options.values.length){n.value=this.values(t);n.values=this.values()}this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e);this._refreshValue();this._change(null,0)}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n);this._refreshValue();this._change(null,t)}if(arguments.length)if(e.isArray(arguments[0])){r=this.options.values;i=arguments[0];for(s=0;s<r.length;s+=1){r[s]=this._trimAlignValue(i[s]);this._change(null,s)}this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(t):this.value();else return this._values()},_setOption:function(t,n){var r,i=0;if(e.isArray(this.options.values))i=this.options.values.length;e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":if(n){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=false;break}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n;if(arguments.length){t=this.options.values[e];return t=this._trimAlignValue(t)}else{t=this.options.values.slice();for(n=0;n<t.length;n+=1)t[n]=this._trimAlignValue(t[n]);return t}},_trimAlignValue:function(e){if(e<this._valueMin())return this._valueMin();if(e>this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=e%t;e=e-n;if(Math.abs(n)*2>=t)e+=n>0?t:-t;return parseFloat(e.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t=this.options.range,n=this.options,r=this,i=!this._animateOff?n.animate:false,s,o={},u,a,f,l;if(this.options.values&&this.options.values.length)this.handles.each(function(t){s=(r.values(t)-r._valueMin())/(r._valueMax()-r._valueMin())*100;o[r.orientation==="horizontal"?"left":"bottom"]=s+"%";e(this).stop(1,1)[i?"animate":"css"](o,n.animate);if(r.options.range===true)if(r.orientation==="horizontal"){if(t===0)r.range.stop(1,1)[i?"animate":"css"]({left:s+"%"},n.animate);if(t===1)r.range[i?"animate":"css"]({width:s-u+"%"},{queue:false,duration:n.animate})}else{if(t===0)r.range.stop(1,1)[i?"animate":"css"]({bottom:s+"%"},n.animate);if(t===1)r.range[i?"animate":"css"]({height:s-u+"%"},{queue:false,duration:n.animate})}u=s});else{a=this.value();f=this._valueMin();l=this._valueMax();s=l!==f?(a-f)/(l-f)*100:0;o[r.orientation==="horizontal"?"left":"bottom"]=s+"%";this.handle.stop(1,1)[i?"animate":"css"](o,n.animate);if(t==="min"&&this.orientation==="horizontal")this.range.stop(1,1)[i?"animate":"css"]({width:s+"%"},n.animate);if(t==="max"&&this.orientation==="horizontal")this.range[i?"animate":"css"]({width:100-s+"%"},{queue:false,duration:n.animate});if(t==="min"&&this.orientation==="vertical")this.range.stop(1,1)[i?"animate":"css"]({height:s+"%"},n.animate);if(t==="max"&&this.orientation==="vertical")this.range[i?"animate":"css"]({height:100-s+"%"},{queue:false,duration:n.animate})}}});e.extend(e.ui.slider,{version:"1.8.6"})})(jQuery);(function(d,G){function K(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};d.extend(this._defaults,this.regional[""]);this.dpDiv=d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')}function E(e,t){d.extend(e,t);for(var n in t)if(t[n]==null||t[n]==G)e[n]=t[n];return e}d.extend(d.ui,{datepicker:{version:"1.8.6"}});var y=(new Date).getTime();d.extend(K.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){E(this._defaults,e||{});return this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f=e=="div"||e=="span";if(!a.id){this.uuid+=1;a.id="dp"+this.uuid}var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{});if(e=="input")this._connectDatepicker(a,i);else f&&this._inlineDatepicker(a,i)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:!t?this.dpDiv:d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},_connectDatepicker:function(e,t){var n=d(e);t.append=d([]);t.trigger=d([]);if(!n.hasClass(this.markerClassName)){this._attachments(n,t);n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)});this._autoSize(t);d.data(e,"datepicker",t)}},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove();if(n){t.append=d('<span class="'+this._appendClass+'">'+n+"</span>");e[r?"before":"after"](t.append)}e.unbind("focus",this._showDatepicker);t.trigger&&t.trigger.remove();n=this._get(t,"showOn");if(n=="focus"||n=="both")e.focus(this._showDatepicker);if(n=="button"||n=="both"){n=this._get(t,"buttonText");var i=this._get(t,"buttonImage");t.trigger=d(this._get(t,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:i,alt:n,title:n}):d('<button type="button"></button>').addClass(this._triggerClass).html(i==""?n:d("<img/>").attr({src:i,alt:n,title:n})));e[r?"before":"after"](t.trigger);t.trigger.click(function(){d.datepicker._datepickerShowing&&d.datepicker._lastInput==e[0]?d.datepicker._hideDatepicker():d.datepicker._showDatepicker(e[0]);return false})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){for(var t=0,n=0,r=0;r<e.length;r++)if(e[r].length>t){t=e[r].length;n=r}return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort")));t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=d(e);if(!n.hasClass(this.markerClassName)){n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)});d.data(e,"datepicker",t);this._setDate(t,this._getDefaultDate(t),true);this._updateDatepicker(t);this._updateAlternate(t)}},_dialogDatepicker:function(e,t,n,r,i){e=this._dialogInst;if(!e){this.uuid+=1;this._dialogInput=d('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);e=this._dialogInst=this._newInst(this._dialogInput,false);e.settings={};d.data(this._dialogInput[0],"datepicker",e)}E(e.settings,r||{});t=t&&t.constructor==Date?this._formatDate(e,t):t;this._dialogInput.val(t);this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");e.settings.onSelect=n;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);d.data(this._dialogInput[0],"datepicker",e);return this},_destroyDatepicker:function(e){var t=d(e),n=d.data(e,"datepicker");if(t.hasClass(this.markerClassName)){var r=e.nodeName.toLowerCase();d.removeData(e,"datepicker");if(r=="input"){n.append.remove();n.trigger.remove();t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(r=="div"||r=="span")t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=d(e),n=d.data(e,"datepicker");if(t.hasClass(this.markerClassName)){var r=e.nodeName.toLowerCase();if(r=="input"){e.disabled=false;n.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(r=="div"||r=="span")t.children("."+this._inlineClass).children().removeClass("ui-state-disabled");this._disabledInputs=d.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=d(e),n=d.data(e,"datepicker");if(t.hasClass(this.markerClassName)){var r=e.nodeName.toLowerCase();if(r=="input"){e.disabled=true;n.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(r=="div"||r=="span")t.children("."+this._inlineClass).children().addClass("ui-state-disabled");this._disabledInputs=d.map(this._disabledInputs,function(t){return t==e?null:t});this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return false;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return true;return false},_getInst:function(e){try{return d.data(e,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?d.extend({},d.datepicker._defaults):r?t=="all"?d.extend({},r.settings):this._get(r,t):null;var i=t||{};if(typeof t=="string"){i={};i[t]=n}if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,true);E(r.settings,i);this._attachments(d(e),r);this._autoSize(r);this._setDateDatepicker(e,s);this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){(e=this._getInst(e))&&this._updateDatepicker(e)},_setDateDatepicker:function(e,t){if(e=this._getInst(e)){this._setDate(e,t);this._updateDatepicker(e);this._updateAlternate(e)}},_getDateDatepicker:function(e,t){(e=this._getInst(e))&&!e.inline&&this._setDateFromField(e,t);return e?this._getDate(e):null},_doKeyDown:function(e){var t=d.datepicker._getInst(e.target),n=true,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=true;if(d.datepicker._datepickerShowing)switch(e.keyCode){case 9:d.datepicker._hideDatepicker();n=false;break;case 13:n=d("td."+d.datepicker._dayOverClass,t.dpDiv).add(d("td."+d.datepicker._currentClass,t.dpDiv));n[0]?d.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,n[0]):d.datepicker._hideDatepicker();return false;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(e.target,e.ctrlKey?-d.datepicker._get(t,"stepBigMonths"):-d.datepicker._get(t,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(e.target,e.ctrlKey?+d.datepicker._get(t,"stepBigMonths"):+d.datepicker._get(t,"stepMonths"),"M");break;case 35:if(e.ctrlKey||e.metaKey)d.datepicker._clearDate(e.target);n=e.ctrlKey||e.metaKey;break;case 36:if(e.ctrlKey||e.metaKey)d.datepicker._gotoToday(e.target);n=e.ctrlKey||e.metaKey;break;case 37:if(e.ctrlKey||e.metaKey)d.datepicker._adjustDate(e.target,r?+1:-1,"D");n=e.ctrlKey||e.metaKey;if(e.originalEvent.altKey)d.datepicker._adjustDate(e.target,e.ctrlKey?-d.datepicker._get(t,"stepBigMonths"):-d.datepicker._get(t,"stepMonths"),"M");break;case 38:if(e.ctrlKey||e.metaKey)d.datepicker._adjustDate(e.target,-7,"D");n=e.ctrlKey||e.metaKey;break;case 39:if(e.ctrlKey||e.metaKey)d.datepicker._adjustDate(e.target,r?-1:+1,"D");n=e.ctrlKey||e.metaKey;if(e.originalEvent.altKey)d.datepicker._adjustDate(e.target,e.ctrlKey?+d.datepicker._get(t,"stepBigMonths"):+d.datepicker._get(t,"stepMonths"),"M");break;case 40:if(e.ctrlKey||e.metaKey)d.datepicker._adjustDate(e.target,+7,"D");n=e.ctrlKey||e.metaKey;break;default:n=false}else if(e.keyCode==36&&e.ctrlKey)d.datepicker._showDatepicker(this);else n=false;if(n){e.preventDefault();e.stopPropagation()}},_doKeyPress:function(e){var t=d.datepicker._getInst(e.target);if(d.datepicker._get(t,"constrainInput")){t=d.datepicker._possibleChars(d.datepicker._get(t,"dateFormat"));var n=String.fromCharCode(e.charCode==G?e.keyCode:e.charCode);return e.ctrlKey||n<" "||!t||t.indexOf(n)>-1}},_doKeyUp:function(e){e=d.datepicker._getInst(e.target);if(e.input.val()!=e.lastVal)try{if(d.datepicker.parseDate(d.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,d.datepicker._getFormatConfig(e))){d.datepicker._setDateFromField(e);d.datepicker._updateAlternate(e);d.datepicker._updateDatepicker(e)}}catch(t){d.datepicker.log(t)}return true},_showDatepicker:function(e){e=e.target||e;if(e.nodeName.toLowerCase()!="input")e=d("input",e.parentNode)[0];if(!(d.datepicker._isDisabledDatepicker(e)||d.datepicker._lastInput==e)){var t=d.datepicker._getInst(e);d.datepicker._curInst&&d.datepicker._curInst!=t&&d.datepicker._curInst.dpDiv.stop(true,true);var n=d.datepicker._get(t,"beforeShow");E(t.settings,n?n.apply(e,[e,t]):{});t.lastVal=null;d.datepicker._lastInput=e;d.datepicker._setDateFromField(t);if(d.datepicker._inDialog)e.value="";if(!d.datepicker._pos){d.datepicker._pos=d.datepicker._findPos(e);d.datepicker._pos[1]+=e.offsetHeight}var r=false;d(e).parents().each(function(){r|=d(this).css("position")=="fixed";return!r});if(r&&d.browser.opera){d.datepicker._pos[0]-=document.documentElement.scrollLeft;d.datepicker._pos[1]-=document.documentElement.scrollTop}n={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(t);n=d.datepicker._checkOffset(t,n,r);t.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":r?"fixed":"absolute",display:"none",left:n.left+"px",top:n.top+"px"});if(!t.inline){n=d.datepicker._get(t,"showAnim");var i=d.datepicker._get(t,"duration"),s=function(){d.datepicker._datepickerShowing=true;var e=d.datepicker._getBorders(t.dpDiv);t.dpDiv.find("iframe.ui-datepicker-cover").css({left:-e[0],top:-e[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})};t.dpDiv.zIndex(d(e).zIndex()+1);d.effects&&d.effects[n]?t.dpDiv.show(n,d.datepicker._get(t,"showOptions"),i,s):t.dpDiv[n||"show"](n?i:null,s);if(!n||!i)s();t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus();d.datepicker._curInst=t}}},_updateDatepicker:function(e){var t=this,n=d.datepicker._getBorders(e.dpDiv);e.dpDiv.empty().append(this._generateHTML(e)).find("iframe.ui-datepicker-cover").css({left:-n[0],top:-n[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){d(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!t._isDisabledDatepicker(e.inline?e.dpDiv.parent()[0]:e.input[0])){d(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");d(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).addClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).addClass("ui-datepicker-next-hover")}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();n=this._getNumberOfMonths(e);var r=n[1];r>1?e.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",17*r+"em"):e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");e.dpDiv[(n[0]!=1||n[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");e==d.datepicker._curInst&&d.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input.focus()},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+d(document).scrollLeft(),a=document.documentElement.clientHeight+d(document).scrollTop();t.left-=this._get(e,"isRTL")?r-s:0;t.left-=n&&t.left==e.input.offset().left?d(document).scrollLeft():0;t.top-=n&&t.top==e.input.offset().top+o?d(document).scrollTop():0;t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0);t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0);return t},_findPos:function(e){for(var t=this._get(this._getInst(e),"isRTL");e&&(e.type=="hidden"||e.nodeType!=1);)e=e[t?"previousSibling":"nextSibling"];e=d(e).offset();return[e.left,e.top]},_hideDatepicker:function(e){var t=this._curInst;if(!(!t||e&&t!=d.data(e,"datepicker")))if(this._datepickerShowing){e=this._get(t,"showAnim");var n=this._get(t,"duration"),r=function(){d.datepicker._tidyDialog(t);this._curInst=null};d.effects&&d.effects[e]?t.dpDiv.hide(e,d.datepicker._get(t,"showOptions"),n,r):t.dpDiv[e=="slideDown"?"slideUp":e=="fadeIn"?"fadeOut":"hide"](e?n:null,r);e||r();if(e=this._get(t,"onClose"))e.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(d.datepicker._curInst){e=d(e.target);e[0].id!=d.datepicker._mainDivId&&e.parents("#"+d.datepicker._mainDivId).length==0&&!e.hasClass(d.datepicker.markerClassName)&&!e.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)&&d.datepicker._hideDatepicker()}},_adjustDate:function(e,t,n){e=d(e);var r=this._getInst(e[0]);if(!this._isDisabledDatepicker(e[0])){this._adjustInstDate(r,t+(n=="M"?this._get(r,"showCurrentAtPos"):0),n);this._updateDatepicker(r)}},_gotoToday:function(e){e=d(e);var t=this._getInst(e[0]);if(this._get(t,"gotoCurrent")&&t.currentDay){t.selectedDay=t.currentDay;t.drawMonth=t.selectedMonth=t.currentMonth;t.drawYear=t.selectedYear=t.currentYear}else{var n=new Date;t.selectedDay=n.getDate();t.drawMonth=t.selectedMonth=n.getMonth();t.drawYear=t.selectedYear=n.getFullYear()}this._notifyChange(t);this._adjustDate(e)},_selectMonthYear:function(e,t,n){e=d(e);var r=this._getInst(e[0]);r._selectingMonthYear=false;r["selected"+(n=="M"?"Month":"Year")]=r["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10);this._notifyChange(r);this._adjustDate(e)},_clickMonthYear:function(e){var t=this._getInst(d(e)[0]);t.input&&t._selectingMonthYear&&setTimeout(function(){t.input.focus()},0);t._selectingMonthYear=!t._selectingMonthYear},_selectDay:function(e,t,n,r){var i=d(e);if(!(d(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))){i=this._getInst(i[0]);i.selectedDay=i.currentDay=d("a",r).html();i.selectedMonth=i.currentMonth=t;i.selectedYear=i.currentYear=n;this._selectDate(e,this._formatDate(i,i.currentDay,i.currentMonth,i.currentYear))}},_clearDate:function(e){e=d(e);this._getInst(e[0]);this._selectDate(e,"")},_selectDate:function(e,t){e=this._getInst(d(e)[0]);t=t!=null?t:this._formatDate(e);e.input&&e.input.val(t);this._updateAlternate(e);var n=this._get(e,"onSelect");if(n)n.apply(e.input?e.input[0]:null,[t,e]);else e.input&&e.input.trigger("change");if(e.inline)this._updateDatepicker(e);else{this._hideDatepicker();this._lastInput=e.input[0];typeof e.input[0]!="object"&&e.input.focus();this._lastInput=null}},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));d(t).each(function(){d(this).val(i)})}},noWeekends:function(e){e=e.getDay();return[e>0&&e<6,""]},iso8601Week:function(e){e=new Date(e.getTime());e.setDate(e.getDate()+4-(e.getDay()||7));var t=e.getTime();e.setMonth(0);e.setDate(1);return Math.floor(Math.round((t-e)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;for(var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=n=-1,f=-1,l=-1,c=false,h=function(t){(t=g+1<e.length&&e.charAt(g+1)==t)&&g++;return t},p=function(e){h(e);e=new RegExp("^\\d{1,"+(e=="@"?14:e=="!"?20:e=="y"?4:e=="o"?3:2)+"}");e=t.substring(m).match(e);if(!e)throw"Missing number at position "+m;m+=e[0].length;return parseInt(e[0],10)},d=function(e,n,r){e=h(e)?r:n;for(n=0;n<e.length;n++)if(t.substr(m,e[n].length).toLowerCase()==e[n].toLowerCase()){m+=e[n].length;return n+1}throw"Unknown name at position "+m},v=function(){if(t.charAt(m)!=e.charAt(g))throw"Unexpected literal at position "+m;m++},m=0,g=0;g<e.length;g++)if(c)if(e.charAt(g)=="'"&&!h("'"))c=false;else v();else switch(e.charAt(g)){case"d":f=p("d");break;case"D":d("D",i,s);break;case"o":l=p("o");break;case"m":a=p("m");break;case"M":a=d("M",o,u);break;case"y":n=p("y");break;case"@":var y=new Date(p("@"));n=y.getFullYear();a=y.getMonth()+1;f=y.getDate();break;case"!":y=new Date((p("!")-this._ticksTo1970)/1e4);n=y.getFullYear();a=y.getMonth()+1;f=y.getDate();break;case"'":if(h("'"))v();else c=true;break;default:v()}if(n==-1)n=(new Date).getFullYear();else if(n<100)n+=(new Date).getFullYear()-(new Date).getFullYear()%100+(n<=r?0:-100);if(l>-1){a=1;f=l;do{r=this._getDaysInMonth(n,a-1);if(f<=r)break;a++;f-=r}while(1)}y=this._daylightSavingAdjust(new Date(n,a-1,f));if(y.getFullYear()!=n||y.getMonth()+1!=a||y.getDate()!=f)throw"Invalid date";return y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort;n=(n?n.monthNames:null)||this._defaults.monthNames;var o=function(t){(t=c+1<e.length&&e.charAt(c+1)==t)&&c++;return t},u=function(e,t,n){t=""+t;if(o(e))for(;t.length<n;)t="0"+t;return t},a=function(e,t,n,r){return o(e)?r[t]:n[t]},f="",l=false;if(t)for(var c=0;c<e.length;c++)if(l)if(e.charAt(c)=="'"&&!o("'"))l=false;else f+=e.charAt(c);else switch(e.charAt(c)){case"d":f+=u("d",t.getDate(),2);break;case"D":f+=a("D",t.getDay(),r,i);break;case"o":f+=u("o",(t.getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5,3);break;case"m":f+=u("m",t.getMonth()+1,2);break;case"M":f+=a("M",t.getMonth(),s,n);break;case"y":f+=o("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":f+=t.getTime();break;case"!":f+=t.getTime()*1e4+this._ticksTo1970;break;case"'":if(o("'"))f+="'";else l=true;break;default:f+=e.charAt(c)}return f},_possibleChars:function(e){for(var t="",n=false,r=function(t){(t=i+1<e.length&&e.charAt(i+1)==t)&&i++;return t},i=0;i<e.length;i++)if(n)if(e.charAt(i)=="'"&&!r("'"))n=false;else t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":if(r("'"))t+="'";else n=true;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==G?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u);r=t?"":r}e.selectedDay=i.getDate();e.drawMonth=e.selectedMonth=i.getMonth();e.drawYear=e.selectedYear=i.getFullYear();e.currentDay=r?i.getDate():0;e.currentMonth=r?i.getMonth():0;e.currentYear=r?i.getFullYear():0;this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;t.setDate(t.getDate()+e);return t},i=function(t){try{return d.datepicker.parseDate(d.datepicker._get(e,"dateFormat"),t,d.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?d.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth();r=r.getDate();for(var o=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=o.exec(t);u;){switch(u[2]||"d"){case"d":case"D":r+=parseInt(u[1],10);break;case"w":case"W":r+=parseInt(u[1],10)*7;break;case"m":case"M":s+=parseInt(u[1],10);r=Math.min(r,d.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(u[1],10);r=Math.min(r,d.datepicker._getDaysInMonth(i,s));break}u=o.exec(t)}return new Date(i,s,r)};if(t=(t=t==null?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):t)&&t.toString()=="Invalid Date"?n:t){t.setHours(0);t.setMinutes(0);t.setSeconds(0);t.setMilliseconds(0)}return this._daylightSavingAdjust(t)},_daylightSavingAdjust:function(e){if(!e)return null;e.setHours(e.getHours()>12?e.getHours()+2:0);return e},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear;t=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=t.getDate();e.drawMonth=e.selectedMonth=e.currentMonth=t.getMonth();e.drawYear=e.selectedYear=e.currentYear=t.getFullYear();if((i!=e.selectedMonth||s!=e.selectedYear)&&!n)this._notifyChange(e);this._adjustInstDate(e);if(e.input)e.input.val(r?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(!e.currentDay?new Date(9999,9,9):new Date(e.currentYear,e.currentMonth,e.currentDay)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max");u=e.drawMonth-u;var p=e.drawYear;if(u<0){u+=12;p--}if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));for(v=c&&v<c?c:v;this._daylightSavingAdjust(new Date(p,u,1))>v;){u--;if(u<0){u=11;p--}}}e.drawMonth=u;e.drawYear=p;v=this._get(e,"prevText");v=!s?v:this.formatDate(v,this._daylightSavingAdjust(new Date(p,u-a,1)),this._getFormatConfig(e));v=this._canAdjustMonth(e,-1,p,u)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+e.id+"', -"+a+", 'M');\" title=\""+v+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+v+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+v+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+v+"</span></a>";var m=this._get(e,"nextText");m=!s?m:this.formatDate(m,this._daylightSavingAdjust(new Date(p,u+a,1)),this._getFormatConfig(e));i=this._canAdjustMonth(e,+1,p,u)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+e.id+"', +"+a+", 'M');\" title=\""+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+m+"</span></a>";a=this._get(e,"currentText");m=this._get(e,"gotoCurrent")&&e.currentDay?l:t;a=!s?a:this.formatDate(a,m,this._getFormatConfig(e));s=!e.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+y+'.datepicker._hideDatepicker();">'+this._get(e,"closeText")+"</button>":"";r=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?s:"")+(this._isInRange(e,m)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._gotoToday('#"+e.id+"');\">"+a+"</button>":"")+(n?"":s)+"</div>":"";s=parseInt(this._get(e,"firstDay"),10);s=isNaN(s)?0:s;a=this._get(e,"showWeek");m=this._get(e,"dayNames");this._get(e,"dayNamesShort");var g=this._get(e,"dayNamesMin"),b=this._get(e,"monthNames"),w=this._get(e,"monthNamesShort"),E=this._get(e,"beforeShowDay"),S=this._get(e,"showOtherMonths"),x=this._get(e,"selectOtherMonths");this._get(e,"calculateWeek");for(var T=this._getDefaultDate(e),N="",C=0;C<o[0];C++){for(var k="",L=0;L<o[1];L++){var A=this._daylightSavingAdjust(new Date(p,u,e.selectedDay)),O=" ui-corner-all",M="";if(f){M+='<div class="ui-datepicker-group';if(o[1]>1)switch(L){case 0:M+=" ui-datepicker-group-first";O=" ui-corner-"+(n?"right":"left");break;case o[1]-1:M+=" ui-datepicker-group-last";O=" ui-corner-"+(n?"left":"right");break;default:M+=" ui-datepicker-group-middle";O="";break}M+='">'}M+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+O+'">'+(/all|left/.test(O)&&C==0?n?i:v:"")+(/all|right/.test(O)&&C==0?n?v:i:"")+this._generateMonthYearHeader(e,u,p,c,h,C>0||L>0,b,w)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var _=a?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(O=0;O<7;O++){var D=(O+s)%7;_+="<th"+((O+s+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+m[D]+'">'+g[D]+"</span></th>"}M+=_+"</tr></thead><tbody>";_=this._getDaysInMonth(p,u);if(p==e.selectedYear&&u==e.selectedMonth)e.selectedDay=Math.min(e.selectedDay,_);O=(this._getFirstDayOfMonth(p,u)-s+7)%7;_=f?6:Math.ceil((O+_)/7);D=this._daylightSavingAdjust(new Date(p,u,1-O));for(var P=0;P<_;P++){M+="<tr>";var H=!a?"":'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(D)+"</td>";for(O=0;O<7;O++){var B=E?E.apply(e.input?e.input[0]:null,[D]):[true,""],j=D.getMonth()!=u,F=j&&!x||!B[0]||c&&D<c||h&&D>h;H+='<td class="'+((O+s+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(D.getTime()==A.getTime()&&u==e.selectedMonth&&e._keyEvent||T.getTime()==D.getTime()&&T.getTime()==A.getTime()?" "+this._dayOverClass:"")+(F?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!S?"":" "+B[1]+(D.getTime()==l.getTime()?" "+this._currentClass:"")+(D.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!j||S)&&B[2]?' title="'+B[2]+'"':"")+(F?"":' onclick="DP_jQuery_'+y+".datepicker._selectDay('#"+e.id+"',"+D.getMonth()+","+D.getFullYear()+', this);return false;"')+">"+(j&&!S?"&#xa0;":F?'<span class="ui-state-default">'+D.getDate()+"</span>":'<a class="ui-state-default'+(D.getTime()==t.getTime()?" ui-state-highlight":"")+(D.getTime()==l.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+'" href="#">'+D.getDate()+"</a>")+"</td>";D.setDate(D.getDate()+1);D=this._daylightSavingAdjust(D)}M+=H+"</tr>"}u++;if(u>11){u=0;p++}M+="</tbody></table>"+(f?"</div>"+(o[0]>0&&L==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");k+=M}N+=k}N+=r+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");e._keyEvent=false;return N},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{o=r&&r.getFullYear()==n;var p=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+e.id+"', this, 'M');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+e.id+"');\">";for(var d=0;d<12;d++)if((!o||d>=r.getMonth())&&(!p||d<=i.getMonth()))h+='<option value="'+d+'"'+(d==t?' selected="selected"':"")+">"+u[d]+"</option>";h+="</select>"}l||(c+=h+(s||!(a&&f)?"&#xa0;":""));if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{u=this._get(e,"yearRange").split(":");var v=(new Date).getFullYear();o=function(e){e=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(e)?v:e};t=o(u[0]);u=Math.max(t,o(u[1]||""));t=r?Math.max(t,r.getFullYear()):t;u=i?Math.min(u,i.getFullYear()):u;for(c+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+e.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+e.id+"');\">";t<=u;t++)c+='<option value="'+t+'"'+(t==n?' selected="selected"':"")+">"+t+"</option>";c+="</select>"}c+=this._get(e,"yearSuffix");if(l)c+=(s||!(a&&f)?"&#xa0;":"")+h;c+="</div>";return c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0);t=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0);r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,t)));e.selectedDay=r.getDate();e.drawMonth=e.selectedMonth=r.getMonth();e.drawYear=e.selectedYear=r.getFullYear();if(n=="M"||n=="Y")this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min");e=this._getMinMaxDate(e,"max");t=n&&t<n?n:t;return t=e&&t>e?e:t},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");if(t)t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){e=this._get(e,"numberOfMonths");return e==null?[1,1]:typeof e=="number"?[1,e]:e},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e);n=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));t<0&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth()));return this._isInRange(e,n)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min");e=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!e||t.getTime()<=e.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10);return{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){if(!t){e.currentDay=e.selectedDay;e.currentMonth=e.selectedMonth;e.currentYear=e.selectedYear}t=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),t,this._getFormatConfig(e))}});d.fn.datepicker=function(e){if(!d.datepicker.initialized){d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv);d.datepicker.initialized=true}var t=Array.prototype.slice.call(arguments,1);if(typeof e=="string"&&(e=="isDisabled"||e=="getDate"||e=="widget"))return d.datepicker["_"+e+"Datepicker"].apply(d.datepicker,[this[0]].concat(t));if(e=="option"&&arguments.length==2&&typeof arguments[1]=="string")return d.datepicker["_"+e+"Datepicker"].apply(d.datepicker,[this[0]].concat(t));return this.each(function(){typeof e=="string"?d.datepicker["_"+e+"Datepicker"].apply(d.datepicker,[this].concat(t)):d.datepicker._attachDatepicker(this,e)})};d.datepicker=new K;d.datepicker.initialized=false;d.datepicker.uuid=(new Date).getTime();d.datepicker.version="1.8.6";window["DP_jQuery_"+y]=d})(jQuery);(function($){function Timepicker(e){if(typeof e==="boolean"&&e==true){this.regional=[];this.regional[""]={currentText:"Now",ampm:false,timeFormat:"hh:mm tt",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second"};this.defaults={showButtonPanel:true,timeOnly:false,showHour:true,showMinute:true,showSecond:false,showTime:true,stepHour:.05,stepMinute:.05,stepSecond:.05,hour:0,minute:0,second:0,hourMin:0,minuteMin:0,secondMin:0,hourMax:23,minuteMax:59,secondMax:59,hourGrid:0,minuteGrid:0,secondGrid:0,alwaysSetTime:true};$.extend(this.defaults,this.regional[""])}else{this.defaults=$.extend({},$.timepicker.defaults)}}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}Timepicker.prototype={$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,hour:0,minute:0,second:0,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",addTimePicker:function(e){var t=this;var n;if(this.$altInput&&this.$altInput!=null){n=this.$input.val()+" "+this.$altInput.val()}else{n=this.$input.val()}var r=this.defaults.timeFormat.toString().replace(/h{1,2}/ig,"(\\d?\\d)").replace(/m{1,2}/ig,"(\\d?\\d)").replace(/s{1,2}/ig,"(\\d?\\d)").replace(/t{1,2}/ig,"(am|pm|a|p)?").replace(/\s/g,"\\s?")+"$";if(!this.defaults.timeOnly){var i=$.datepicker._get(e,"dateFormat");r=".{"+i.length+",}\\s+"+r}var s=this.getFormatPositions();var o=n.match(new RegExp(r,"i"));if(o){if(s.t!==-1){this.ampm=(o[s.t]===undefined||o[s.t].length===0?"":o[s.t].charAt(0).toUpperCase()=="A"?"AM":"PM").toUpperCase()}if(s.h!==-1){if(this.ampm=="AM"&&o[s.h]=="12"){this.hour=0}else if(this.ampm=="PM"&&o[s.h]!="12"){this.hour=(parseFloat(o[s.h])+12).toFixed(0)}else{this.hour=o[s.h]}}if(s.m!==-1){this.minute=o[s.m]}if(s.s!==-1){this.second=o[s.s]}}t.timeDefined=o?true:false;if(typeof e.stay_open!=="boolean"||e.stay_open===false){setTimeout(function(){t.injectTimePicker(e,t)},10)}else{t.injectTimePicker(e,t)}},getFormatPositions:function(){var e=this.defaults.timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|t{1,2})/g);var t={h:-1,m:-1,s:-1,t:-1};if(e){for(var n=0;n<e.length;n++){if(t[e[n].toString().charAt(0)]==-1){t[e[n].toString().charAt(0)]=n+1}}}return t},injectTimePicker:function(e,t){var n=e.dpDiv;var r=t.defaults;var i=r.hourMax-r.hourMax%r.stepHour;var s=r.minuteMax-r.minuteMax%r.stepMinute;var o=r.secondMax-r.secondMax%r.stepSecond;if(n.find("div#ui-timepicker-div-"+e.id).length===0){var u=' style="display:none;"';var a='<div class="ui-timepicker-div" id="ui-timepicker-div-'+e.id+'"><dl>'+'<dt class="ui_tpicker_time_label" id="ui_tpicker_time_label_'+e.id+'"'+(r.showTime?"":u)+">"+r.timeText+"</dt>"+'<dd class="ui_tpicker_time" id="ui_tpicker_time_'+e.id+'"'+(r.showTime?"":u)+"></dd>"+'<dt class="ui_tpicker_hour_label" id="ui_tpicker_hour_label_'+e.id+'"'+(r.showHour?"":u)+">"+r.hourText+"</dt>";if(r.hourGrid>0){a+='<dd class="ui_tpicker_hour ui_tpicker_hour_'+r.hourGrid+'">'+'<div id="ui_tpicker_hour_'+e.id+'"'+(r.showHour?"":u)+"></div>"+"<div><table><tr>";for(var f=0;f<i;f+=r.hourGrid){var l=f;if(r.ampm&&f>12)l=f-12;else l=f;if(l<10)l="0"+l;if(r.ampm){if(f==0)l=12+"a";else if(f<12)l+="a";else l+="p"}a+="<td>"+l+"</td>"}a+="</tr></table></div>"+"</dd>"}else{a+='<dd class="ui_tpicker_hour" id="ui_tpicker_hour_'+e.id+'"'+(r.showHour?"":u)+"></dd>"}a+='<dt class="ui_tpicker_minute_label" id="ui_tpicker_minute_label_'+e.id+'"'+(r.showMinute?"":u)+">"+r.minuteText+"</dt>";if(r.minuteGrid>0){a+='<dd class="ui_tpicker_minute ui_tpicker_minute_'+r.minuteGrid+'">'+'<div id="ui_tpicker_minute_'+e.id+'"'+(r.showMinute?"":u)+"></div>"+"<div><table><tr>";for(var c=0;c<s;c+=r.minuteGrid){a+="<td>"+(c<10?"0":"")+c+"</td>"}a+="</tr></table></div>"+"</dd>"}else{a+='<dd class="ui_tpicker_minute" id="ui_tpicker_minute_'+e.id+'"'+(r.showMinute?"":u)+"></dd>"}a+='<dt class="ui_tpicker_second_label" id="ui_tpicker_second_label_'+e.id+'"'+(r.showSecond?"":u)+">"+r.secondText+"</dt>";if(r.secondGrid>0){a+='<dd class="ui_tpicker_second ui_tpicker_second_'+r.secondGrid+'">'+'<div id="ui_tpicker_second_'+e.id+'"'+(r.showSecond?"":u)+"></div>"+"<table><table><tr>";for(var h=0;h<o;h+=r.secondGrid){a+="<td>"+(h<10?"0":"")+h+"</td>"}a+="</tr></table></table>"+"</dd>"}else{a+='<dd class="ui_tpicker_second" id="ui_tpicker_second_'+e.id+'"'+(r.showSecond?"":u)+"></dd>"}a+="</dl></div>";$tp=$(a);if(r.timeOnly===true){$tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all">'+'<div class="ui-datepicker-title">'+r.timeOnlyTitle+"</div>"+"</div>");n.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()}t.hour_slider=$tp.find("#ui_tpicker_hour_"+e.id).slider({orientation:"horizontal",value:t.hour,min:r.hourMin,max:i,step:r.stepHour,slide:function(n,r){t.hour_slider.slider("option","value",r.value);t.onTimeChange(e,t)}});t.minute_slider=$tp.find("#ui_tpicker_minute_"+e.id).slider({orientation:"horizontal",value:t.minute,min:r.minuteMin,max:s,step:r.stepMinute,slide:function(n,r){t.minute_slider.slider("option","value",r.value);t.onTimeChange(e,t)}});t.second_slider=$tp.find("#ui_tpicker_second_"+e.id).slider({orientation:"horizontal",value:t.second,min:r.secondMin,max:o,step:r.stepSecond,slide:function(n,r){t.second_slider.slider("option","value",r.value);t.onTimeChange(e,t)}});$tp.find(".ui_tpicker_hour td").each(function(n){$(this).click(function(){var n=$(this).html();if(r.ampm){var i=n.substring(2).toLowerCase();var s=new Number(n.substring(0,2));if(i=="a"){if(s==12)n=0;else n=s}else{if(s==12)n=12;else n=s+12}}t.hour_slider.slider("option","value",n);t.onTimeChange(e,t)});$(this).css({cursor:"pointer",width:"1%","text-align":"left"})});$tp.find(".ui_tpicker_minute td").each(function(n){$(this).click(function(){t.minute_slider.slider("option","value",$(this).html());t.onTimeChange(e,t)});$(this).css({cursor:"pointer",width:"1%","text-align":"left"})});$tp.find(".ui_tpicker_second td").each(function(n){$(this).click(function(){t.second_slider.slider("option","value",$(this).html());t.onTimeChange(e,t)});$(this).css({cursor:"pointer",width:"1%","text-align":"left"})});n.find(".ui-datepicker-calendar").after($tp);t.$timeObj=$("#ui_tpicker_time_"+e.id);if(e!==null){var p=t.timeDefined;t.onTimeChange(e,t);t.timeDefined=p}}},onTimeChange:function(e,t){var n=t.hour_slider.slider("value");var r=t.minute_slider.slider("value");var i=t.second_slider.slider("value");var s=n<11.5?"AM":"PM";n=n>=11.5&&n<12?12:n;var o=false;if(t.hour!=n||t.minute!=r||t.second!=i||t.ampm.length>0&&t.ampm!=s){o=true}t.hour=parseFloat(n).toFixed(0);t.minute=parseFloat(r).toFixed(0);t.second=parseFloat(i).toFixed(0);t.ampm=s;t.formatTime(t);t.$timeObj.text(t.formattedTime);if(o){t.updateDateTime(e,t);t.timeDefined=true}},formatTime:function(e){var t=e.defaults.timeFormat.toString();var n=e.ampm=="AM"?e.hour:e.hour%12;n=Number(n)===0?12:n;if(e.defaults.ampm===true){t=t.toString().replace(/hh/g,(n<10?"0":"")+n).replace(/h/g,n).replace(/mm/g,(e.minute<10?"0":"")+e.minute).replace(/m/g,e.minute).replace(/ss/g,(e.second<10?"0":"")+e.second).replace(/s/g,e.second).replace(/TT/g,e.ampm.toUpperCase()).replace(/tt/g,e.ampm.toLowerCase()).replace(/T/g,e.ampm.charAt(0).toUpperCase()).replace(/t/g,e.ampm.charAt(0).toLowerCase())}else{t=t.toString().replace(/hh/g,(e.hour<10?"0":"")+e.hour).replace(/h/g,e.hour).replace(/mm/g,(e.minute<10?"0":"")+e.minute).replace(/m/g,e.minute).replace(/ss/g,(e.second<10?"0":"")+e.second).replace(/s/g,e.second);t=$.trim(t.replace(/t/gi,""))}e.formattedTime=t;return e.formattedTime},updateDateTime:function(e,t){var n=new Date(e.selectedYear,e.selectedMonth,e.selectedDay);var r=$.datepicker._get(e,"dateFormat");var i=$.datepicker._getFormatConfig(e);this.formattedDate=$.datepicker.formatDate(r,n===null?new Date:n,i);var s=this.formattedDate;var o=n!==null&&t.timeDefined;if(this.defaults.timeOnly===true){s=this.formattedTime}else if(this.defaults.timeOnly!==true&&(this.defaults.alwaysSetTime||o)){if(this.$altInput&&this.$altInput!=null){this.$altInput.val(this.formattedTime)}else{s+=" "+this.formattedTime}}this.formattedDateTime=s;this.$input.val(s);this.$input.trigger("change")},setDefaults:function(e){extendRemove(this.defaults,e||{});return this}};jQuery.fn.datetimepicker=function(o){var opts=o===undefined?{}:o;var input=$(this);var tp=new Timepicker;var inlineSettings={};for(var attrName in tp.defaults){var attrValue=input.attr("time:"+attrName);if(attrValue){try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}tp.defaults=$.extend(tp.defaults,inlineSettings);var beforeShowFunc=function(e,t){tp.hour=tp.defaults.hour;tp.minute=tp.defaults.minute;tp.second=tp.defaults.second;tp.ampm="";tp.$input=$(e);if(opts.altField!=undefined&&opts.altField!="")tp.$altInput=$($.datepicker._get(t,"altField"));tp.inst=t;tp.addTimePicker(t);if($.isFunction(opts.beforeShow)){opts.beforeShow(e,t)}};var onChangeMonthYearFunc=function(e,t,n){tp.updateDateTime(n,tp);if($.isFunction(opts.onChangeMonthYear)){opts.onChangeMonthYear(e,t,n)}};var onCloseFunc=function(e,t){if(tp.timeDefined===true&&input.val()!=""){tp.updateDateTime(t,tp)}if($.isFunction(opts.onClose)){opts.onClose(e,t)}};tp.defaults=$.extend({},tp.defaults,opts,{beforeShow:beforeShowFunc,onChangeMonthYear:onChangeMonthYearFunc,onClose:onCloseFunc,timepicker:tp});$(this).datepicker(tp.defaults)};jQuery.fn.timepicker=function(e){e=$.extend(e,{timeOnly:true});$(this).datetimepicker(e)};$.datepicker._base_selectDate=$.datepicker._selectDate;$.datepicker._selectDate=function(e,t){var n=$(e);var r=this._getInst(n[0]);var i=$.datepicker._get(r,"timepicker");if(i){r.inline=true;r.stay_open=true;$.datepicker._base_selectDate(e,t);r.stay_open=false;r.inline=false;this._notifyChange(r);this._updateDatepicker(r)}else{$.datepicker._base_selectDate(e,t)}};$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker;$.datepicker._updateDatepicker=function(e){if(typeof e.stay_open!=="boolean"||e.stay_open===false){this._base_updateDatepicker(e);this._beforeShow(e.input,e)}};$.datepicker._beforeShow=function(e,t){var n=this._get(t,"beforeShow");if(n){t.stay_open=true;n.apply(t.input?t.input[0]:null,[t.input,t]);t.stay_open=false}};$.datepicker._base_doKeyPress=$.datepicker._doKeyPress;$.datepicker._doKeyPress=function(e){var t=$.datepicker._getInst(e.target);var n=$.datepicker._get(t,"timepicker");if(n){if($.datepicker._get(t,"constrainInput")){var r=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat"));var i=String.fromCharCode(e.charCode===undefined?e.keyCode:e.charCode);var s=i.toLowerCase();return e.ctrlKey||i<" "||!r||r.indexOf(i)>-1||e.keyCode==58||e.keyCode==32||i==":"||i==" "||s=="a"||s=="p"||s=="m"}}else{return $.datepicker._base_doKeyPress(e)}};$.datepicker._base_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(e){$.datepicker._base_gotoToday(e);var t=$(e);var n=this._getInst(t[0]);var r=$.datepicker._get(n,"timepicker");if(r){var i=new Date;var s=i.getHours();var o=i.getMinutes();var u=i.getSeconds();if(s<r.defaults.hourMin||s>r.defaults.hourMax||o<r.defaults.minuteMin||o>r.defaults.minuteMax||u<r.defaults.secondMin||u>r.defaults.secondMax){s=r.defaults.hourMin;o=r.defaults.minuteMin;u=r.defaults.secondMin}r.hour_slider.slider("value",s);r.minute_slider.slider("value",o);r.second_slider.slider("value",u);r.onTimeChange(n,r)}};$.timepicker=new Timepicker(true)})(jQuery);(function(e,t){e.fn.autosave=function(n){function s(){i.find("input:not(:password,:submit), textarea, select").each(function(t){if(e(this).attr("name")!="ship_to_same_address"&&e(this).attr("name")!="register_new_account"){var i=e(this).attr("id")||e(this).attr("name")+"_";var s=e(this),o=n+i;r.setItem(o,s.attr("type")==="checkbox"?s.prop("checked"):s.val())}})}function o(){i.find("input:not(:password,:submit), textarea, select").each(function(i){if(e(this).attr("name")!="ship_to_same_address"&&e(this).attr("name")!="register_new_account"){var s=e(this).attr("id")||e(this).attr("name")+"_";var o=e(this),u=n+s;if(o.attr("type")==="checkbox"){o.prop("checked",r.getItem(u))}else{if(t.OneStep.$.trim(r.getItem(u))!=""){o.val(r.getItem(u))}}}})}function u(){i.find("input:not(:password,:submit), textarea, select").each(function(t){var i=e(this).attr("id")||e(this).attr("name")+"_";var s=n+i;r.removeItem(s)})}var r=t.localStorage,i=this;if(typeof n==="undefined"){n=i.attr("id")||i.attr("name")}n+="_";i.on({change:s,submit:u});o()}})(jQuery,window)